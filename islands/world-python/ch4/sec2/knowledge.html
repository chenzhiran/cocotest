<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç¬¬3-5å…³ æ ‡å‡†æ“ä½œè§„ç¨‹ SOP</title>
    <style>
        /* --- 1. åŸºç¡€è®¾ç½® --- */
        :root {
            --bg-color: #5D6D7E;       /* æˆ˜æœ¯ç°è“èƒŒæ™¯ */
            --board-bg: #F4F6F7;       /* ç™½æ¿èƒŒæ™¯ */
            --primary: #2E86C1;        /* æŒ‡æŒ¥è“ */
            --secondary: #E74C3C;      /* è­¦æˆ’çº¢ */
            --accent: #27AE60;         /* æˆåŠŸç»¿ */
            --text-main: #2C3E50;
            --text-sub: #7F8C8D;
            
            /* ä»£ç é«˜äº® */
            --code-bg: #212F3C;
            --code-fg: #ECF0F1;
            --tok-def: #AF7AC5;        /* def */
            --tok-func: #5DADE2;       /* å‡½æ•°å */
            --tok-var: #F4D03F;        /* å˜é‡ */
            --tok-str: #58D68D;        /* å­—ç¬¦ä¸² */
            --tok-kw: #E74C3C;         /* å…³é”®å­— while, if */
            --tok-prop: #A569BD;       /* å±æ€§ .pos */
            --tok-cm: #95A5A6;         /* æ³¨é‡Š */
        }

        body {
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', 'Microsoft YaHei', 'Comic Sans MS', sans-serif;
            background-color: var(--bg-color);
            /* æ–¹æ ¼æˆ˜æœ¯åœ°å›¾èƒŒæ™¯ */
            background-image: 
                linear-gradient(rgba(255,255,255,0.05) 1px, transparent 1px),
                linear-gradient(90deg, rgba(255,255,255,0.05) 1px, transparent 1px);
            background-size: 30px 30px;
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            overflow: hidden;
            user-select: none;
        }

        /* --- 2. èˆå°å¸ƒå±€ --- */
        .stage {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 60px;
            width: 98vw;
            max-width: 1400px;
            position: relative;
            z-index: 10;
        }

        /* --- 3. å‹‹ç« æŒ‰é’® (å¤–éƒ¨) --- */
        .nav-btn {
            width: 90px;
            height: 90px;
            background: #F1C40F;
            border: 4px solid #F39C12;
            border-radius: 50%;
            cursor: pointer;
            position: relative;
            box-shadow: 0 8px 0 #D35400, 0 15px 20px rgba(0,0,0,0.3);
            transition: all 0.1s;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #D35400;
            font-size: 40px;
            font-weight: bold;
        }
        
        /* å‹‹ç« å¸¦å­ */
        .nav-btn::after {
            content: '';
            position: absolute;
            bottom: -20px;
            width: 40px;
            height: 40px;
            background: #E74C3C;
            z-index: -1;
            transform: rotate(45deg);
            box-shadow: inset 0 0 10px rgba(0,0,0,0.2);
        }

        .nav-btn:hover { transform: translateY(2px); background: #F4D03F; }
        .nav-btn:active { transform: translateY(8px); box-shadow: 0 0 0 #D35400; }
        
        .disabled { opacity: 0.5; filter: grayscale(1); pointer-events: none; }

        /* --- 4. ä½œæˆ˜ç™½æ¿å®¹å™¨ --- */
        .board-container {
            width: 960px;
            height: 600px;
            background: var(--board-bg);
            border-radius: 10px;
            /* é‡‘å±è¾¹æ¡† */
            border: 15px solid #BDC3C7;
            box-shadow: 
                0 0 0 2px #7F8C8D,
                0 20px 50px rgba(0,0,0,0.5);
            position: relative;
            overflow: hidden;
            display: flex;
            flex-direction: column;
        }

        /* é¡¶éƒ¨å¤¹å­è£…é¥° */
        .paper-clip {
            position: absolute;
            top: -10px;
            left: 50%;
            transform: translateX(-50%);
            width: 100px;
            height: 30px;
            background: #95A5A6;
            border-radius: 5px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.3);
            z-index: 20;
        }

        /* åœ°å›¾åç§°æ ‡ç­¾ */
        .map-tag {
            position: absolute;
            top: 20px;
            right: 20px;
            background: #34495E;
            color: #ECF0F1;
            padding: 5px 15px;
            font-family: monospace;
            font-weight: bold;
            transform: rotate(5deg);
            box-shadow: 2px 2px 5px rgba(0,0,0,0.2);
            z-index: 15;
        }
        
        /* å…³å¡æ•°æ ‡ç­¾ */
        .level-tag {
            position: absolute;
            top: 20px;
            left: 20px;
            background: var(--secondary);
            color: white;
            padding: 5px 15px;
            font-weight: bold;
            border-radius: 20px;
            z-index: 15;
            font-size: 14px;
        }

        /* å¹»ç¯ç‰‡ */
        .slide {
            display: none;
            flex: 1;
            padding: 60px 70px 40px 70px;
            flex-direction: column;
            animation: fadeIn 0.5s ease-out;
            overflow-y: auto;
        }
        .slide.active { display: flex; }

        @keyframes fadeIn { 
            0% { opacity: 0; transform: scale(0.98); } 
            100% { opacity: 1; transform: scale(1); } 
        }

        /* å†…å®¹å¸ƒå±€ */
        .header {
            display: flex;
            align-items: center;
            margin-bottom: 20px;
            border-bottom: 3px dashed #BDC3C7;
            padding-bottom: 10px;
        }
        .icon { font-size: 50px; margin-right: 20px; }
        h1 { margin: 0; color: var(--text-main); font-size: 34px; letter-spacing: 1px; }

        .layout { display: flex; gap: 40px; height: 100%; }
        .col-text { flex: 1.2; font-size: 19px; line-height: 1.7; color: var(--text-main); }
        .col-visual { 
            flex: 0.8; 
            background: #fff;
            border-radius: 5px; 
            border: 1px solid #BDC3C7; 
            display: flex; 
            justify-content: center; 
            align-items: center; 
            position: relative;
            overflow: hidden;
            box-shadow: inset 0 0 20px rgba(0,0,0,0.05);
            /* ç½‘æ ¼çº¸èƒŒæ™¯ */
            background-image: 
                linear-gradient(#E5E8E8 1px, transparent 1px),
                linear-gradient(90deg, #E5E8E8 1px, transparent 1px);
            background-size: 20px 20px;
        }

        /* ä»£ç å— */
        .code-box {
            background: var(--code-bg);
            color: var(--code-fg);
            padding: 15px 20px;
            border-radius: 5px;
            font-family: 'Consolas', monospace;
            font-size: 17px;
            margin-top: 15px;
            border-left: 5px solid var(--primary);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            position: relative;
        }
        
        .k { color: var(--tok-def); font-weight: bold; } 
        .f { color: var(--tok-func); } 
        .v { color: var(--tok-var); } 
        .s { color: var(--tok-str); } 
        .kw { color: var(--tok-kw); font-weight: bold; } 
        .p { color: var(--tok-prop); } 
        .c { color: var(--tok-cm); font-style: italic; font-size: 0.9em; } 

        /* å¡ç‰‡ */
        .card {
            background: #D6EAF8;
            border-left: 5px solid var(--primary);
            color: #21618C;
            padding: 15px 20px;
            margin-bottom: 15px;
            font-size: 18px;
            font-weight: bold;
        }

        /* --- 5. è§†è§‰åŒ–ç»„ä»¶ --- */
        
        /* ç›®æ ‡é”å®šåŠ¨ç”» */
        .target-scope {
            position: relative; width: 150px; height: 150px;
            display: flex; justify-content: center; align-items: center;
        }
        .scope-ring {
            position: absolute; width: 100%; height: 100%; border: 3px dashed var(--secondary); border-radius: 50%;
            animation: rotate 10s infinite linear;
        }
        .scope-crosshair {
            position: absolute; font-size: 40px; color: var(--secondary); opacity: 0.5;
        }
        .target-unit {
            font-size: 60px; animation: pulse 2s infinite; z-index: 2;
        }
        .target-label {
            position: absolute; bottom: -30px; background: var(--secondary); color: white; padding: 2px 10px; border-radius: 5px; font-weight: bold;
        }

        /* æ‰¹é‡æ§åˆ¶åŠ¨ç”» */
        .squad-container { display: flex; gap: 10px; }
        .squad-unit { font-size: 40px; position: relative; transition: all 0.3s; }
        .command-bubble {
            position: absolute; top: -40px; left: 50%; transform: translateX(-50%);
            background: white; border: 2px solid var(--primary); padding: 5px; border-radius: 10px;
            font-size: 12px; white-space: nowrap; opacity: 0; transition: opacity 0.3s;
        }
        .squad-unit.active { transform: scale(1.2); }
        .squad-unit.active .command-bubble { opacity: 1; }

        /* å®ˆå«é€»è¾‘æ¼”ç¤º */
        .guard-map { position: relative; width: 100%; height: 100%; }
        .guard-post {
            position: absolute; bottom: 20px; left: 20px; width: 40px; height: 40px;
            border: 3px solid var(--text-main); border-radius: 5px; display: flex; justify-content: center; align-items: center;
            font-size: 20px; background: rgba(0,0,0,0.1);
        }
        .guard-unit {
            position: absolute; bottom: 25px; left: 25px; font-size: 30px; transition: all 2s ease-in-out; z-index: 10;
        }
        .enemy-unit {
            position: absolute; top: 20px; right: 20px; font-size: 30px; opacity: 0; transition: opacity 0.5s;
        }
        .path-line {
            position: absolute; top: 35px; left: 35px; width: 0; height: 2px; background: var(--secondary);
            transform-origin: left center; transform: rotate(-45deg); transition: width 2s;
        }

        /* æµç¨‹å›¾èŠ‚ç‚¹ */
        .flow-node {
            padding: 8px 15px; border-radius: 5px; color: white; font-weight: bold; text-align: center; margin: 8px 0; width: 200px; position: relative; font-size: 16px;
            box-shadow: 2px 2px 0 rgba(0,0,0,0.1);
        }
        .bg-blue { background: var(--primary); }
        .bg-red { background: var(--secondary); }
        .bg-green { background: var(--accent); }
        .arrow-down { font-size: 20px; color: #BDC3C7; margin: 0; text-align: center; width: 100%; }

        /* è¿›åº¦æ¡ */
        .progress-bar {
            height: 8px;
            background: #E5E8E8;
            width: 100%;
            position: absolute;
            bottom: 0;
            left: 0;
        }
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--primary), var(--accent));
            width: 0%;
            transition: width 0.3s;
        }

        @keyframes rotate { 100% { transform: rotate(360deg); } }
        @keyframes pulse { 0%, 100% { transform: scale(1); } 50% { transform: scale(1.1); } }
        @keyframes float { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-10px); } }

    </style>
</head>
<body>

<div class="stage">
    <!-- å·¦æŒ‰é’® -->
    <button class="nav-btn" id="btnPrev" onclick="moveSlide(-1)">â®</button>

    <!-- ç™½æ¿å®¹å™¨ -->
    <div class="board-container">
        <div class="paper-clip"></div>
        <div class="level-tag">ç¬¬ 3-5 å…³</div>
        <div class="map-tag">ğŸ—ºï¸ æ¸¸æˆå¼€å‘ 2</div>

        <!-- Slide 1: å°é¢ -->
        <div class="slide active" style="justify-content: center; align-items: center; text-align: center;">
            <div style="font-size: 100px; margin-bottom: 20px; animation: float 3s infinite;">ğŸ“‹</div>
            <h1 style="font-size: 50px; margin: 10px 0; color: var(--text-main);">æ ‡å‡†æ“ä½œè§„ç¨‹ (SOP)</h1>
            <h2 style="font-size: 24px; color: var(--primary); font-weight: bold; margin-top: 0; background: #D6EAF8; padding: 5px 20px; border-radius: 20px;">Standard Operating Procedure</h2>
            <div style="margin-top: 40px; display: flex; gap: 30px;">
                <div style="padding: 15px 30px; background: var(--accent); color: white; border-radius: 5px; font-weight: bold; font-size: 20px; box-shadow: 0 5px 0 #1E8449;">ğŸ¯ é”å®šç›®æ ‡</div>
                <div style="padding: 15px 30px; background: var(--primary); color: white; border-radius: 5px; font-weight: bold; font-size: 20px; box-shadow: 0 5px 0 #1F618D;">ğŸ“œ æ‰§è¡Œå‘½ä»¤</div>
            </div>
        </div>

        <!-- Slide 2: ä»€ä¹ˆæ˜¯SOP -->
        <div class="slide">
            <div class="header">
                <div class="icon">ğŸš’</div>
                <h1>ä»€ä¹ˆæ˜¯â€œæ ‡å‡†æ“ä½œè§„ç¨‹â€ (SOP)?</h1>
            </div>
            <div class="layout">
                <div class="col-text">
                    <p>åœ¨ç°å®ä¸­ï¼ŒSOP æ˜¯ä¸€å¥—<b>æ ‡å‡†çš„è¡ŒåŠ¨æ­¥éª¤</b>ï¼š<br>
                    ğŸ‘¨â€ğŸš’ <b>æ¶ˆé˜²å‘˜ SOPï¼š</b> æ¥è­¦ â†’ ç©¿è¡£ â†’ ä¸Šè½¦ â†’ å‡ºå‘ã€‚<br>
                    ğŸ‘¨â€âš•ï¸ <b>åŒ»ç”Ÿ SOPï¼š</b> æ£€æŸ¥å‘¼å¸ â†’ é‡è¡€å‹ â†’ è¾“æ¶²ã€‚</p>
                    <div class="card">
                        æ¸¸æˆä»£ç é‡Œçš„ SOPï¼š<br>
                        "æ‰€æœ‰å£«å…µä¸€å‡ºç”Ÿï¼Œå°±æŒ‰ç…§ã€è¿™å¥—æ­¥éª¤ã€‘è¡ŒåŠ¨ï¼"
                    </div>
                </div>
                <div class="col-visual">
                    <div style="font-size: 60px; display: flex; flex-direction: column; align-items: center; gap: 10px;">
                        <div>ğŸ“œ</div>
                        <div style="font-size: 30px;">â¬‡ï¸</div>
                        <div style="display: flex; gap: 20px;">
                            <span>ğŸ‘®â€â™‚ï¸</span><span>ğŸ‘®â€â™‚ï¸</span><span>ğŸ‘®â€â™‚ï¸</span>
                        </div>
                        <div style="font-size: 16px; color: var(--text-sub);">ä¸€ä»½è¯´æ˜ä¹¦ï¼Œå…¨å‘˜æ‰§è¡Œ</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Slide 3: æ ¸å¿ƒå¥—è·¯ target -->
        <div class="slide">
            <div class="header">
                <div class="icon">ğŸ¯</div>
                <h1>SOP ç¬¬ä¸€æ­¥ï¼šé”å®šä¸»è§’</h1>
            </div>
            <div class="layout">
                <div class="col-text">
                    <p>è°æ¥æ‰§è¡Œè¿™ä¸ªè§„ç¨‹ï¼Ÿæˆ‘ä»¬è¦å…ˆæ‰¾åˆ°ä»–ã€‚</p>
                    <div class="code-box">
                        <span class="k">def</span> <span class="f">fightEnemies</span>(event):<br>
                        &nbsp;&nbsp;<span class="c"># event.target æ˜¯è¿™æ¬¡äº‹ä»¶çš„"ä¸»è§’"</span><br>
                        &nbsp;&nbsp;<span class="v">unit</span> = event.<span class="p">target</span><br>
                        &nbsp;&nbsp;<span class="c"># ä»¥åéƒ½å«ä»– unit (å•ä½)</span><br>
                        &nbsp;&nbsp;<span class="v">unit</span>.<span class="f">attack</span>(enemy)
                    </div>
                    <p style="font-size: 16px; margin-top: 10px;">å°±åƒè€å¸ˆç‚¹åï¼šâ€œè¿™æ¬¡è½®åˆ°<b>å°æ˜</b>ï¼Œå¤§å®¶çœ‹<b>å°æ˜</b>åšç¤ºèŒƒã€‚â€</p>
                </div>
                <div class="col-visual">
                    <div class="target-scope">
                        <div class="scope-ring"></div>
                        <div class="scope-crosshair">+</div>
                        <div class="target-unit">ğŸ¤ </div>
                        <div class="target-label">unit = event.target</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Slide 4: ç¤ºä¾‹ä¸€ï¼šæˆ˜æ–— SOP -->
        <div class="slide">
            <div class="header">
                <div class="icon">âš”ï¸</div>
                <h1>SOP ç¤ºä¾‹ä¸€ï¼šæˆ˜æ–—</h1>
            </div>
            <div class="layout">
                <div class="col-text">
                    <div class="code-box" style="font-size: 16px;">
                        <span class="k">def</span> <span class="f">fightEnemies</span>(event):<br>
                        &nbsp;&nbsp;<span class="v">unit</span> = event.<span class="p">target</span> <span class="c"># 1. ç¡®è®¤æ˜¯è°</span><br>
                        &nbsp;&nbsp;<span class="kw">while</span> True: <span class="c"># 2. ä¸€ç›´åš</span><br>
                        &nbsp;&nbsp;&nbsp;&nbsp;<span class="v">enemy</span> = <span class="v">unit</span>.<span class="f">findNearestEnemy</span>()<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;<span class="kw">if</span> <span class="v">enemy</span>: <span class="c"># 3. æœ‰æ€ªå°±æ‰“</span><br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="v">unit</span>.<span class="f">attack</span>(<span class="v">enemy</span>)
                    </div>
                    <p>ç¿»è¯‘æˆç™½è¯å°±æ˜¯ï¼š<br>â€œè®¤é¢†ä»»åŠ¡ â†’ åªè¦æ´»ç€ â†’ æ‰¾æ•Œäºº â†’ ç ä»–ï¼â€</p>
                </div>
                <div class="col-visual">
                    <div style="display: flex; flex-direction: column; align-items: center; width: 100%;">
                        <div class="flow-node bg-blue">1. é”å®š unit</div>
                        <div class="arrow-down">â¬‡ï¸</div>
                        <div class="flow-node bg-green">2. å¯»æ‰¾æ•Œäºº</div>
                        <div class="arrow-down">â¬‡ï¸</div>
                        <div class="flow-node bg-red">3. æ”»å‡» enemy</div>
                        <div class="arrow-down">ğŸ”„ å¾ªç¯</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Slide 5: ç¤ºä¾‹äºŒï¼šé›†åˆ -->
        <div class="slide">
            <div class="header">
                <div class="icon">ğŸ”¥</div>
                <h1>SOP ç¤ºä¾‹äºŒï¼šé›†åˆ</h1>
            </div>
            <div class="layout">
                <div class="col-text">
                    <p>æœ‰æ—¶å€™ä¸éœ€è¦ä¸€ç›´æ‰“ä»—ï¼Œåªéœ€è¦èµ°åˆ°æŒ‡å®šä½ç½®ã€‚</p>
                    <div class="code-box">
                        <span class="k">def</span> <span class="f">centerFormation</span>(event):<br>
                        &nbsp;&nbsp;<span class="v">unit</span> = event.<span class="p">target</span><br>
                        &nbsp;&nbsp;<span class="c"># æ‰€æœ‰äººå»ç¯ç«æ—é›†åˆ!</span><br>
                        &nbsp;&nbsp;<span class="v">unit</span>.<span class="f">moveXY</span>(40, 36)
                    </div>
                    <div class="card">
                        é…åˆå‘½ä»¤ï¼š<br>
                        <code>game.setActionFor("soldier", "spawn", centerFormation)</code>
                    </div>
                </div>
                <div class="col-visual">
                    <div style="position: relative; width: 100%; height: 100%; display: flex; justify-content: center; align-items: center;">
                        <div style="font-size: 40px;">ğŸ”¥</div>
                        <!-- è·‘å‘ç«çš„å°äºº -->
                        <div style="position: absolute; bottom: 20px; left: 20px; font-size: 30px; animation: runToFire 2s infinite;">ğŸƒ</div>
                        <div style="position: absolute; top: 20px; right: 20px; font-size: 30px; animation: runToFire2 2s infinite;">ğŸƒ</div>
                    </div>
                    <style>
                        @keyframes runToFire { 0% { left: 20px; bottom: 20px; opacity: 0; } 20% { opacity: 1; } 100% { left: 45%; bottom: 45%; opacity: 0; } }
                        @keyframes runToFire2 { 0% { right: 20px; top: 20px; opacity: 0; } 20% { opacity: 1; } 100% { right: 45%; top: 45%; opacity: 0; } }
                    </style>
                </div>
            </div>
        </div>

        <!-- Slide 6: ç¤ºä¾‹ä¸‰ï¼šå®ˆå« (é«˜çº§) -->
        <div class="slide">
            <div class="header">
                <div class="icon">ğŸ›¡ï¸</div>
                <h1>SOP ç¤ºä¾‹ä¸‰ï¼šå®ˆå«æ—é“</h1>
            </div>
            <div class="layout">
                <div class="col-text">
                    <p>è¿™ä¸ª SOP å¤šäº†ä¸€æ­¥ï¼š<b>è®°ä½å®¶åœ¨å“ª</b>ã€‚</p>
                    <div class="code-box" style="font-size: 14px;">
                        <span class="k">def</span> <span class="f">defendLane</span>(event):<br>
                        &nbsp;&nbsp;<span class="v">unit</span> = event.<span class="p">target</span><br>
                        &nbsp;&nbsp;<span class="c"># 1. è®°ä¸‹å‡ºç”Ÿç‚¹ X åæ ‡</span><br>
                        &nbsp;&nbsp;<span class="v">startX</span> = <span class="v">unit</span>.<span class="p">pos</span>.x<br>
                        &nbsp;&nbsp;<span class="kw">while</span> True:<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;<span class="v">enemy</span> = <span class="v">unit</span>.<span class="f">findNearestEnemy</span>()<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;<span class="kw">if</span> <span class="v">enemy</span>:<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="v">unit</span>.<span class="f">attack</span>(<span class="v">enemy</span>)<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;<span class="kw">else</span>:<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c"># 2. æ²¡æ•Œäººå°±å›å®¶</span><br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="v">unit</span>.<span class="f">moveXY</span>(<span class="v">startX</span>, 16)
                    </div>
                </div>
                <div class="col-visual">
                    <div class="guard-map" id="guardDemo">
                        <div class="guard-post">ğŸ </div>
                        <div class="guard-unit" id="guardUnit">ğŸ‘®</div>
                        <div class="enemy-unit" id="enemyUnit">ğŸ‘¾</div>
                        <div class="path-line" id="pathLine"></div>
                    </div>
                    <button onclick="runGuardDemo()" style="position: absolute; bottom: 10px; right: 10px; padding: 5px 10px; cursor: pointer;">æ¨¡æ‹Ÿæˆ˜æ–—</button>
                    <script>
                        function runGuardDemo() {
                            const u = document.getElementById('guardUnit');
                            const e = document.getElementById('enemyUnit');
                            const l = document.getElementById('pathLine');
                            
                            // æ•Œäººå‡ºç°
                            e.style.opacity = 1;
                            // å£«å…µå‡ºå‡»
                            u.style.bottom = '70%'; u.style.left = '70%';
                            l.style.width = '100%'; // ç”»çº¿
                            
                            setTimeout(() => {
                                e.style.opacity = 0; // æ•Œäººæ­»
                                // å£«å…µå›å®¶
                                setTimeout(() => {
                                    u.style.bottom = '25px'; u.style.left = '25px';
                                    l.style.width = '0';
                                }, 500);
                            }, 1500);
                        }
                    </script>
                </div>
            </div>
        </div>

        <!-- Slide 7: æ‰¹é‡æ§åˆ¶ -->
        <div class="slide">
            <div class="header">
                <div class="icon">ğŸ“£</div>
                <h1>å…¨å†›å‡ºå‡»ï¼šsetActionFor</h1>
            </div>
            <div class="layout">
                <div class="col-text">
                    <p>å†™å¥½äº† SOPï¼Œæ€ä¹ˆå‘ç»™æ‰€æœ‰äººï¼Ÿ</p>
                    <div class="code-box">
                        <span class="v">game</span>.<span class="f">setActionFor</span>(<span class="s">"soldier"</span>, <span class="s">"spawn"</span>, <span class="f">fightEnemies</span>)
                    </div>
                    <p>è¿™å¥è¯çš„æ„æ€æ˜¯ï¼š<br>
                    â€œæ¸¸æˆè¯·æ³¨æ„ï¼šå½“<b>å£«å…µ</b>å‘ç”Ÿ<b>å‡ºç”Ÿ</b>äº‹ä»¶æ—¶ï¼Œè‡ªåŠ¨æ‰§è¡Œ <b>fightEnemies</b> è¿™ä¸ª SOPã€‚â€</p>
                    <div class="card" style="background: #F9E79F; color: #D35400; border-color: #F39C12;">
                        ä»æ­¤ä½ å°±æ˜¯ç»™å…¨å†›åˆ¶å®šè§„åˆ™çš„æ€»æŒ‡æŒ¥å®˜ï¼
                    </div>
                </div>
                <div class="col-visual">
                    <div style="text-align: center;">
                        <div style="font-size: 60px;">ğŸ“£</div>
                        <div class="squad-container">
                            <div class="squad-unit">ğŸ‘®</div>
                            <div class="squad-unit">ğŸ‘®</div>
                            <div class="squad-unit">ğŸ‘®</div>
                        </div>
                        <button onclick="broadcastCommand()" style="margin-top: 10px; padding: 5px 10px; cursor: pointer;">å‘å¸ƒå‘½ä»¤</button>
                    </div>
                    <script>
                        function broadcastCommand() {
                            document.querySelectorAll('.squad-unit').forEach((u, i) => {
                                setTimeout(() => u.classList.add('active'), i * 200);
                                setTimeout(() => u.classList.remove('active'), 1000 + i * 200);
                                u.innerHTML = `<div class="command-bubble">æ”¶åˆ°!</div>ğŸ‘®`;
                            });
                        }
                    </script>
                </div>
            </div>
        </div>

        <!-- Slide 8: é€šç”¨æ¨¡æ¿ -->
        <div class="slide">
            <div class="header">
                <div class="icon">ğŸ“</div>
                <h1>SOP ä¸‡èƒ½æ¨¡æ¿</h1>
            </div>
            <div class="layout">
                <div class="col-text">
                    <p>ä»¥åå†™äº‹ä»¶å¤„ç†ï¼Œç›´æ¥å¥—ç”¨è¿™ä¸ªæ¨¡æ¿ï¼š</p>
                    <div class="code-box" style="border-color: #BDC3C7;">
                        <span class="k">def</span> <span class="f">myHandler</span>(event):<br>
                        &nbsp;&nbsp;<span class="c"># 1. è®¤é¢†ä¸»è§’</span><br>
                        &nbsp;&nbsp;<span class="v">unit</span> = event.<span class="p">target</span><br>
                        <br>
                        &nbsp;&nbsp;<span class="c"># 2. è®°å½•åˆå§‹ä¿¡æ¯ (å¯é€‰)</span><br>
                        &nbsp;&nbsp;<span class="c"># startX = unit.pos.x</span><br>
                        <br>
                        &nbsp;&nbsp;<span class="c"># 3. æ­»å¾ªç¯å¹²æ´»</span><br>
                        &nbsp;&nbsp;<span class="kw">while</span> True:<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;<span class="c"># ä½ çš„é€»è¾‘...</span>
                    </div>
                </div>
                <div class="col-visual">
                    <div style="font-size: 80px; color: #BDC3C7;">ğŸ› ï¸</div>
                    <div style="position: absolute; bottom: 20px; color: var(--text-sub); font-weight: bold;">ä¸‡èƒ½å·¥å…·ç®±</div>
                </div>
            </div>
        </div>

        <!-- Slide 9: è¯­æ³•ä¸æ•°å­¦å°çŸ¥è¯† -->
        <div class="slide">
            <div class="header">
                <div class="icon">ğŸ§®</div>
                <h1>è¯­æ³•ä¸æ•°å­¦å°çŸ¥è¯†</h1>
            </div>
            <div class="layout">
                <div class="col-text" style="font-size: 18px;">
                    <ul style="list-style: none; padding: 0;">
                        <li style="margin-bottom: 15px;">
                            ğŸ“¦ <b>å˜é‡ (Variable)</b>ï¼š<br>
                            <code>unit</code>, <code>startX</code> å°±åƒè´´äº†åå­—çš„ç›’å­ã€‚
                        </li>
                        <li style="margin-bottom: 15px;">
                            ğŸ”– <b>å±æ€§ (Attribute)</b>ï¼š<br>
                            <code>unit.pos.x</code> è¿™é‡Œçš„<b>ç‚¹å· .</b> å°±åƒç¿»å¼€è¯´æ˜ä¹¦ï¼Œæ‰¾åˆ° "ä½ç½®" è¿™ä¸€é¡µçš„ "x" è¡Œã€‚
                        </li>
                        <li style="margin-bottom: 15px;">
                            ğŸ“ˆ <b>åæ ‡ (Coordinate)</b>ï¼š<br>
                            åœ°å›¾å°±æ˜¯æ•°å­¦è¯¾ä¸Šçš„ç›´è§’åæ ‡ç³»ï¼
                        </li>
                    </ul>
                </div>
                <div class="col-visual">
                    <div style="font-size: 50px; display: flex; gap: 20px;">
                        <span>ğŸ“¦</span><span>ğŸ·ï¸</span><span>ğŸ“ˆ</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Slide 10: æ€»ç»“ -->
        <div class="slide">
            <div class="header">
                <div class="icon">ğŸ†</div>
                <h1>æŒ‡æŒ¥å®˜å£è¯€</h1>
            </div>
            <div class="layout">
                <div class="col-text" style="text-align: center; display: flex; flex-direction: column; justify-content: center;">
                    <div class="card" style="background: #D5F5E3; border-color: #27AE60; color: #1E8449;">
                        "å…ˆçœ‹æ˜¯è°æ¥æ‰§è¡Œ (unit)ï¼Œ<br>
                        å†è®°å®¶åœ¨å“ª (startX)ï¼Œ<br>
                        å¤§è„‘ä¸€ç›´è½¬ (while True)ï¼Œ<br>
                        æœ‰æ€ªæ‰“æ€ªï¼Œæ²¡æ€ªå›å®¶ï¼"
                    </div>
                    <div style="margin-top: 20px; font-size: 24px; color: var(--primary); font-weight: bold;">
                        æœ€ååˆ«å¿˜å‘å‘½ä»¤ï¼š<br>game.setActionFor!
                    </div>
                </div>
                <div class="col-visual" style="border: none; background: transparent; box-shadow: none;">
                    <div style="font-size: 120px;">ğŸ–ï¸</div>
                </div>
            </div>
        </div>

        <!-- åº•éƒ¨è¿›åº¦æ¡ -->
        <div class="progress-bar"><div class="progress-fill" id="progressBar"></div></div>

    </div>

    <!-- å³æŒ‰é’® -->
    <button class="nav-btn" id="btnNext" onclick="moveSlide(1)">â¯</button>

</div>

<script>
    let currentSlide = 0;
    const slides = document.querySelectorAll('.slide');
    const totalSlides = slides.length;
    const progressBar = document.getElementById('progressBar');
    const btnPrev = document.getElementById('btnPrev');
    const btnNext = document.getElementById('btnNext');

    function updateUI() {
        slides.forEach((slide, index) => {
            if (index === currentSlide) {
                slide.classList.add('active');
            } else {
                slide.classList.remove('active');
            }
        });

        btnPrev.classList.toggle('disabled', currentSlide === 0);
        btnNext.classList.toggle('disabled', currentSlide === totalSlides - 1);

        const percentage = ((currentSlide + 1) / totalSlides) * 100;
        progressBar.style.width = `${percentage}%`;
    }

    function moveSlide(dir) {
        const nextIndex = currentSlide + dir;
        if (nextIndex >= 0 && nextIndex < totalSlides) {
            currentSlide = nextIndex;
            updateUI();
        }
    }

    document.addEventListener('keydown', (e) => {
        if (e.key === 'ArrowLeft') moveSlide(-1);
        if (e.key === 'ArrowRight') moveSlide(1);
    });

    updateUI();
</script>

</body>
</html>