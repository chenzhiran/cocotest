<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>3.4 å¸Œå°”æ’åº - ç®—æ³•è¯¦è§£</title>
    <style>
        /* ================= æ ¸å¿ƒé£æ ¼ï¼šæ—¶ç©ºè·³è·ƒ ================= */
        :root {
            --jump-teal: #009688;    /* è·³è·ƒé’ */
            --jump-dark: #004d40;    /* æ·±é’ */
            --energy-orange: #ff6f00;/* èƒ½é‡æ©™ */
            --bg-color: #e0f2f1;     /* æµ…é’èƒŒæ™¯ */
            --text-main: #263238;    /* æ·±ç°æ–‡å­— */
            --code-bg: #263238;
        }

        body {
            font-family: "Verdana", "YouYuan", "Microsoft YaHei", sans-serif;
            background-color: var(--bg-color);
            /* ç½‘æ ¼èƒŒæ™¯ */
            background-image: 
                linear-gradient(rgba(0, 150, 136, 0.1) 1px, transparent 1px),
                linear-gradient(90deg, rgba(0, 150, 136, 0.1) 1px, transparent 1px);
            background-size: 30px 30px;
            color: var(--text-main);
            margin: 0;
            padding: 40px 20px;
            line-height: 1.8;
        }

        .container {
            max-width: 960px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 50px;
            box-shadow: 0 20px 40px rgba(0, 77, 64, 0.2);
            border-top: 8px solid var(--jump-teal);
            border-bottom: 8px solid var(--energy-orange);
        }

        /* ================= æ ‡é¢˜ä¸æ’ç‰ˆ ================= */
        h1 {
            text-align: center;
            color: var(--jump-dark);
            font-size: 3.5em;
            margin-bottom: 10px;
            text-shadow: 3px 3px 0 #b2dfdb;
        }

        .subtitle {
            text-align: center;
            font-size: 1.3em;
            color: var(--jump-teal);
            margin-bottom: 40px;
            font-weight: bold;
        }

        h2 {
            background: linear-gradient(45deg, var(--jump-teal), #4db6ac);
            color: white;
            padding: 12px 35px;
            border-radius: 5px 20px 5px 20px;
            display: inline-block;
            margin-top: 50px;
            margin-bottom: 25px;
            font-size: 1.8em;
            box-shadow: 5px 5px 0 rgba(0,0,0,0.1);
        }

        p { font-size: 1.15em; margin-bottom: 20px; }

        /* ================= é‡ç‚¹å¼ºè°ƒ ================= */
        .highlight {
            color: var(--energy-orange);
            font-weight: 900;
            background: #fff3e0;
            padding: 2px 8px;
            border-radius: 4px;
            border: 1px dashed var(--energy-orange);
        }

        .analogy-box {
            background: #e0f7fa;
            border-left: 8px solid var(--jump-teal);
            border-radius: 10px;
            padding: 25px;
            margin: 30px 0;
            position: relative;
        }
        
        .analogy-box::after {
            content: "ğŸš€";
            font-size: 40px;
            position: absolute;
            right: 20px;
            top: 50%;
            transform: translateY(-50%);
        }

        /* ================= å›¾è§£åŒºåŸŸ ================= */
        .illustration-panel {
            background: white;
            border: 2px solid #b2dfdb;
            border-radius: 15px;
            margin: 30px 0;
            padding: 30px;
            text-align: center;
            overflow: hidden;
        }

        .gap-label {
            background: var(--energy-orange);
            color: white;
            padding: 5px 15px;
            border-radius: 20px;
            font-weight: bold;
            display: inline-block;
            margin-bottom: 15px;
        }

        /* ================= ä»£ç å—ä¸Tabs ================= */
        .code-wrapper {
            background: var(--code-bg);
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 15px 30px rgba(0,0,0,0.4);
            margin-top: 20px;
        }

        .tab-bar {
            display: flex;
            background: #1b2528;
        }

        .tab-btn {
            flex: 1;
            padding: 18px;
            background: transparent;
            color: #90a4ae;
            border: none;
            cursor: pointer;
            font-weight: bold;
            font-size: 16px;
            transition: 0.3s;
        }
        .tab-btn:hover { background: #37474f; color: white; }
        .tab-btn.active { 
            background: var(--code-bg); 
            color: var(--jump-teal); 
            border-top: 4px solid var(--jump-teal); 
        }

        .code-view {
            display: none;
            padding: 25px;
            color: #eceff1;
            font-family: "Consolas", "Monaco", monospace;
            white-space: pre-wrap;
            line-height: 1.6;
            font-size: 15px;
        }
        .code-view.active { display: block; }

        /* è¯­æ³•é«˜äº® */
        .k { color: #ff6f00; font-weight: bold; } /* keyword */
        .t { color: #4db6ac; } /* type */
        .n { color: #ff8a65; } /* number */
        .s { color: #81c784; } /* string */
        .c { color: #78909c; font-style: italic; } /* comment */
        .f { color: #4fc3f7; } /* function */

    </style>
</head>
<body>

<div class="container">

    <div style="text-align: center;">
        <svg width="300" height="120" viewBox="0 0 300 120">
            <text x="30" y="80" font-size="30">ğŸŒ</text>
            <text x="30" y="100" font-size="10" fill="#999">æ’å…¥æ’åº</text>
            
            <path d="M 120 80 Q 150 20 180 80" stroke="#009688" stroke-width="3" fill="none" stroke-dasharray="5,5">
                <animate attributeName="stroke-dashoffset" from="50" to="0" dur="1s" repeatCount="indefinite"/>
            </path>
            <path d="M 180 80 Q 210 20 240 80" stroke="#009688" stroke-width="3" fill="none" stroke-dasharray="5,5">
                <animate attributeName="stroke-dashoffset" from="50" to="0" dur="1s" repeatCount="indefinite" begin="0.5s"/>
            </path>
            
            <text x="120" y="80" font-size="30">ğŸ¸</text>
            <text x="110" y="100" font-size="10" fill="#009688" font-weight="bold">å¸Œå°”æ’åº(è·³ç€èµ°)</text>

            <line x1="10" y1="85" x2="290" y2="85" stroke="#ccc" stroke-width="2"/>
        </svg>
    </div>

    <h1>3.4 å¸Œå°”æ’åº</h1>
    <p class="subtitle">Shell Sortï¼šæ’å…¥æ’åºçš„â€œè¶…çº§åŠ é€Ÿç‰ˆâ€ ğŸš€</p>

    <div class="analogy-box">
        <h3>ğŸ¤” ä¸ºä»€ä¹ˆè¦æ”¹è¿›æ’å…¥æ’åºï¼Ÿ</h3>
        <p>è¿˜è®°å¾—<strong>æ’å…¥æ’åº</strong>å—ï¼Ÿå®ƒåƒç†ç‰Œä¸€æ ·ï¼Œä¸€å¼ å¼ æŒªã€‚ä½†æ˜¯ï¼Œå¦‚æœæœ€å°çš„æ•°å­—ä¸å¹¸åœ°åœ¨æœ€åé¢ï¼ˆæ¯”å¦‚ <code>[9, 8, ... , 1]</code>ï¼‰ï¼Œé‚£æ•°å­— 1 è¦è¢«ç§»åŠ¨ n-1 æ¬¡æ‰èƒ½åˆ°æœ€å‰é¢ï¼å¤ªç´¯äº†ï¼</p>
        <p><strong>å¸Œå°”æ’åºçš„ç»æ‹›ï¼š</strong> æ—¢ç„¶ä¸€æ­¥ä¸€æ­¥æŒªå¤ªæ…¢ï¼Œé‚£æˆ‘ä»¬å°±<span class="highlight">å¤§æ­¥å¤§æ­¥åœ°è·³</span>ï¼å…ˆè®©æ•°å­—è·³åˆ°å¤§è‡´æ­£ç¡®çš„ä½ç½®ï¼Œæœ€åå†å¾®è°ƒã€‚</p>
    </div>

    <h2>ğŸ¨ è¯¦ç»†å›¾è§£ï¼šåˆ†ç»„è·³è·ƒ</h2>
    <p>æˆ‘ä»¬æŠŠè¿™ç§â€œå¤§æ­¥å­â€å«åš<strong>å¢é‡ (Gap)</strong>ã€‚é€šå¸¸æˆ‘ä»¬å…ˆæŠŠè·ç¦»è®¾ä¸ºæ€»é•¿åº¦çš„ä¸€åŠï¼Œç„¶åæ…¢æ…¢å‡åŠï¼Œç›´åˆ°è·ç¦»å˜æˆ1ã€‚</p>
    <p>å‡è®¾æ•°ç»„ä¸ºï¼š<span style="font-weight:bold; font-size:1.2em;">[ 8, 5, 6, 4, 2, 1, 3, 7 ]</span> (é•¿åº¦8)</p>

    <div class="illustration-panel">
        <div class="gap-label">ç¬¬ä¸€è½®ï¼šGap = 4 (åˆ†æˆ4ç»„)</div>
        <p>ç›¸éš” 4 ä¸ªä½ç½®çš„æ•°å­—äº’ç›¸æ¯”æ‹¼ï¼</p>
        <svg width="600" height="180" viewBox="0 0 600 180">
            <path d="M 60 70 Q 180 20 300 70" stroke="#e91e63" stroke-width="2" fill="none"/>
            <rect x="30" y="70" width="60" height="60" fill="#fce4ec" stroke="#e91e63" rx="5"/>
            <text x="60" y="110" text-anchor="middle" font-weight="bold">8</text>
            <rect x="270" y="70" width="60" height="60" fill="#fce4ec" stroke="#e91e63" rx="5"/>
            <text x="300" y="110" text-anchor="middle" font-weight="bold">2</text>
            <text x="180" y="40" fill="#e91e63" font-size="12">8 > 2ï¼Œäº¤æ¢!</text>

            <path d="M 120 70 Q 240 20 360 70" stroke="#2196f3" stroke-width="2" fill="none"/>
            <rect x="90" y="70" width="60" height="60" fill="#e3f2fd" stroke="#2196f3" rx="5"/>
            <text x="120" y="110" text-anchor="middle" font-weight="bold">5</text>
            <rect x="330" y="70" width="60" height="60" fill="#e3f2fd" stroke="#2196f3" rx="5"/>
            <text x="360" y="110" text-anchor="middle" font-weight="bold">1</text>
            
            <path d="M 180 70 Q 300 20 420 70" stroke="#ff9800" stroke-width="2" fill="none"/>
            <rect x="150" y="70" width="60" height="60" fill="#fff3e0" stroke="#ff9800" rx="5"/>
            <text x="180" y="110" text-anchor="middle" font-weight="bold">6</text>
            <rect x="390" y="70" width="60" height="60" fill="#fff3e0" stroke="#ff9800" rx="5"/>
            <text x="420" y="110" text-anchor="middle" font-weight="bold">3</text>

            <path d="M 240 70 Q 360 20 480 70" stroke="#4caf50" stroke-width="2" fill="none"/>
            <rect x="210" y="70" width="60" height="60" fill="#e8f5e9" stroke="#4caf50" rx="5"/>
            <text x="240" y="110" text-anchor="middle" font-weight="bold">4</text>
            <rect x="450" y="70" width="60" height="60" fill="#e8f5e9" stroke="#4caf50" rx="5"/>
            <text x="480" y="110" text-anchor="middle" font-weight="bold">7</text>
            <text x="420" y="160" fill="#4caf50" font-size="12">4 < 7ï¼Œä¸åŠ¨</text>

        </svg>
        <p><strong>ç¬¬ä¸€è½®ç»“æœï¼š</strong> [2, 1, 3, 4, 8, 5, 6, 7] <br><span style="color:#777; font-size:0.9em;">(å°çš„æ•°ä¸€ä¸‹å­è·³åˆ°äº†å‰é¢ï¼)</span></p>
    </div>

    <div class="illustration-panel">
        <div class="gap-label">ç¬¬äºŒè½®ï¼šGap = 2 (åˆ†æˆ2ç»„)</div>
        <p>æ­¥å­ç¼©å°ï¼Œç›¸éš” 2 ä¸ªä½ç½®çš„æ•°å­—ä¸ºä¸€ç»„ã€‚</p>
        <svg width="600" height="150" viewBox="0 0 600 150">
            <rect x="30" y="70" width="40" height="40" fill="#fce4ec" stroke="#e91e63" stroke-width="2"/>
            <text x="50" y="95" text-anchor="middle">2</text>
            <rect x="130" y="70" width="40" height="40" fill="#fce4ec" stroke="#e91e63" stroke-width="2"/>
            <text x="150" y="95" text-anchor="middle">3</text>
            <rect x="230" y="70" width="40" height="40" fill="#fce4ec" stroke="#e91e63" stroke-width="2"/>
            <text x="250" y="95" text-anchor="middle">8</text>
            <rect x="330" y="70" width="40" height="40" fill="#fce4ec" stroke="#e91e63" stroke-width="2"/>
            <text x="350" y="95" text-anchor="middle">6</text>
            
            <path d="M 50 70 Q 150 20 250 70" stroke="#e91e63" fill="none" stroke-dasharray="4"/>
            <path d="M 150 70 Q 250 20 350 70" stroke="#e91e63" fill="none" stroke-dasharray="4"/>

            <rect x="80" y="70" width="40" height="40" fill="#e3f2fd" stroke="#2196f3" stroke-width="2"/>
            <text x="100" y="95" text-anchor="middle">1</text>
            <rect x="180" y="70" width="40" height="40" fill="#e3f2fd" stroke="#2196f3" stroke-width="2"/>
            <text x="200" y="95" text-anchor="middle">4</text>
            <rect x="280" y="70" width="40" height="40" fill="#e3f2fd" stroke="#2196f3" stroke-width="2"/>
            <text x="300" y="95" text-anchor="middle">5</text>
            <rect x="380" y="70" width="40" height="40" fill="#e3f2fd" stroke="#2196f3" stroke-width="2"/>
            <text x="400" y="95" text-anchor="middle">7</text>
            
            <path d="M 100 110 Q 200 160 300 110" stroke="#2196f3" fill="none" stroke-dasharray="4"/>
        </svg>
        <p>åˆ†åˆ«å¯¹çº¢ç»„å’Œè“ç»„åšæ’å…¥æ’åºã€‚<br><strong>ç¬¬äºŒè½®ç»“æœï¼š</strong> [2, 1, 3, 4, 6, 5, 8, 7]</p>
    </div>

    <div class="illustration-panel">
        <div class="gap-label">ç¬¬ä¸‰è½®ï¼šGap = 1 (æœ€ç»ˆå¾®è°ƒ)</div>
        <p>æœ€åï¼Œæ­¥å­å˜æˆ1ï¼Œè¿™å…¶å®å°±æ˜¯ä¸€æ¬¡æ™®é€šçš„<strong>æ’å…¥æ’åº</strong>ã€‚</p>
        <p>ä½†å› ä¸ºå¤§éƒ¨åˆ†æ•°å­—å·²ç»åœ¨å‰é¢çš„è·³è·ƒä¸­æ’å¥½äº†ï¼Œæ‰€ä»¥è¿™æ¬¡å¾®è°ƒä¼š<span class="highlight">è¶…çº§å¿«</span>ï¼</p>
        <div style="background:#e0f2f1; padding:10px; border-radius:5px; display:inline-block;">
            [1, 2, 3, 4, 5, 6, 7, 8] âœ…
        </div>
    </div>

    <h2>ğŸ’» ç¼–ç¨‹æ—¶é—´</h2>
    <p>ä»£ç çœ‹èµ·æ¥æœ‰ä¸‰å±‚å¾ªç¯ï¼Œä¸è¦æ€•ï¼<br>
    ç¬¬ä¸€å±‚ï¼šæ§åˆ¶ Gap (æ­¥é•¿) ç¼©å°ã€‚<br>
    ç¬¬äºŒå±‚ & ç¬¬ä¸‰å±‚ï¼šå…¶å®å°±æ˜¯åˆ†ç»„è¿›è¡Œçš„<strong>æ’å…¥æ’åº</strong>ã€‚</p>

    <div class="code-wrapper">
        <div class="tab-bar">
            <button class="tab-btn active" onclick="switchTab('cpp')">C++ ä»£ç </button>
            <button class="tab-btn" onclick="switchTab('py')">Python ä»£ç </button>
        </div>

        <div id="cpp" class="code-view active">
<span class="k">#include</span> <span class="s">&lt;iostream&gt;</span>
<span class="k">using namespace</span> std;

<span class="k">void</span> <span class="f">shell_sort</span>(<span class="k">int</span> arr[], <span class="k">int</span> n) {
    <span class="c">// 1. å¤–å±‚å¾ªç¯ï¼šgap æ¯æ¬¡å‡åŠ (8 -> 4 -> 2 -> 1)</span>
    <span class="k">for</span> (<span class="k">int</span> gap = n / 2; gap > 0; gap /= 2) {
        
        <span class="c">// 2. ä¸­é—´å¾ªç¯ï¼šä» gap å¼€å§‹ï¼Œé€ä¸ªå¤„ç†æ¯ä¸ªåˆ†ç»„</span>
        <span class="c">// è¿™å…¶å®å°±æ˜¯"åˆ†ç»„æ’å…¥æ’åº"</span>
        <span class="k">for</span> (<span class="k">int</span> i = gap; i < n; i++) {
            
            <span class="k">int</span> temp = arr[i]; <span class="c">// æ‹¿èµ·è¿™å¼ ç‰Œ</span>
            <span class="k">int</span> j;
            
            <span class="c">// 3. å†…å±‚å¾ªç¯ï¼šåœ¨å®ƒè‡ªå·±çš„ç»„é‡Œå¾€å›çœ‹</span>
            <span class="c">// æ¯”è¾ƒå¯¹è±¡æ˜¯ j - gap</span>
            <span class="k">for</span> (j = i; j >= gap && arr[j - gap] > temp; j -= gap) {
                arr[j] = arr[j - gap]; <span class="c">// å¾€åæŒª</span>
            }
            
            arr[j] = temp; <span class="c">// æ’è¿›å»</span>
        }
    }
}

<span class="k">int</span> <span class="f">main</span>() {
    <span class="k">int</span> a[] = {8, 9, 1, 7, 2, 3, 5, 4, 6, 0};
    <span class="k">int</span> n = 10;

    <span class="f">shell_sort</span>(a, n);

    <span class="k">for</span> (<span class="k">int</span> i = 0; i < n; i++) <span class="f">cout</span> << a[i] << <span class="s">" "</span>;
    <span class="k">return</span> 0;
}
        </div>

        <div id="py" class="code-view">
<span class="k">def</span> <span class="f">shell_sort</span>(arr):
    n = <span class="f">len</span>(arr)
    gap = n // 2  <span class="c"># åˆå§‹æ­¥é•¿</span>
    
    <span class="c"># 1. æ­¥é•¿å¾ªç¯</span>
    <span class="k">while</span> gap > 0:
        
        <span class="c"># 2. ä»æ­¥é•¿ä½ç½®å¼€å§‹éå† (åˆ†ç»„æ’å…¥æ’åº)</span>
        <span class="k">for</span> i <span class="k">in</span> <span class="f">range</span>(gap, n):
            
            temp = arr[i]
            j = i
            
            <span class="c"># 3. ç»„å†…æ¯”è¾ƒå’Œç§»åŠ¨</span>
            <span class="c"># å¦‚æœå‰é¢çš„æ¯”tempå¤§ï¼Œå°±äº¤æ¢(åç§»)</span>
            <span class="k">while</span> j >= gap <span class="k">and</span> arr[j - gap] > temp:
                arr[j] = arr[j - gap]
                j -= gap
                
            arr[j] = temp
            
        <span class="c"># æ­¥é•¿å‡åŠ</span>
        gap //= 2

<span class="c"># æµ‹è¯•</span>
data = [8, 9, 1, 7, 2, 3, 5, 4, 6, 0]
<span class="f">shell_sort</span>(data)
<span class="f">print</span>(<span class="s">"æ’åºç»“æœ:"</span>, data)
        </div>
    </div>

    <h2>ğŸ†š å¸Œå°”æ’åº vs æ’å…¥æ’åº</h2>
    <div style="margin-top: 20px;">
        <table style="width:100%; border-collapse: collapse; text-align: center;">
            <tr style="background: var(--jump-teal); color: white;">
                <th style="padding: 15px;">ç‰¹ç‚¹</th>
                <th>æ™®é€šæ’å…¥æ’åº</th>
                <th>å¸Œå°”æ’åº</th>
            </tr>
            <tr style="background: white; border-bottom: 1px solid #eee;">
                <td style="padding: 15px; font-weight:bold;">ç§»åŠ¨æ–¹å¼</td>
                <td>ğŸ¢ ä¸€æ­¥ä¸€æ­¥æŒª (æ­¥é•¿1)</td>
                <td>ğŸ¸ å¤§æ­¥è·³ (æ­¥é•¿ N/2 -> 1)</td>
            </tr>
            <tr style="background: #f1f8e9; border-bottom: 1px solid #eee;">
                <td style="padding: 15px; font-weight:bold;">æœ€åæƒ…å†µ</td>
                <td>å¦‚æœæ˜¯å€’åºï¼Œæ…¢æ­»å•¦ O(nÂ²)</td>
                <td>æ¯”è¾ƒå¿«ï¼Œå¤§å¹…ä¼˜åŒ–</td>
            </tr>
            <tr style="background: white;">
                <td style="padding: 15px; font-weight:bold;">é€‚ç”¨åœºæ™¯</td>
                <td>æ•°æ®é‡å¾ˆå°ï¼Œæˆ–åŸºæœ¬æœ‰åº</td>
                <td>ä¸­ç­‰è§„æ¨¡çš„æ•°æ®</td>
            </tr>
        </table>
    </div>

</div>

<script>
    function switchTab(lang) {
        document.getElementById('cpp').classList.remove('active');
        document.getElementById('py').classList.remove('active');
        const btns = document.querySelectorAll('.tab-btn');
        btns.forEach(btn => btn.classList.remove('active'));
        document.getElementById(lang).classList.add('active');
        event.currentTarget.classList.add('active');
    }
</script>

</body>
</html>