<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>é«˜ç²¾åº¦ä¹˜æ³•æ¢ç´¢ | High-Precision Multiplication Explorer</title>
    <style>
        :root {
            --primary: #6C5CE7;
            --secondary: #00CEC9;
            --accent: #FD79A8;
            --dark-bg: #2D3436;
            --card-bg: rgba(255, 255, 255, 0.95);
            --text-main: #2d3436;
            --code-bg: #1e1e1e;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: 'Segoe UI', 'PingFang SC', 'Microsoft YaHei', sans-serif;
            background: linear-gradient(135deg, #a8c0ff 0%, #3f2b96 100%);
            color: var(--text-main);
            min-height: 100vh;
            overflow-x: hidden;
            line-height: 1.6;
        }

        /* --- Header & Canvas --- */
        header {
            position: relative;
            height: 250px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            color: white;
            text-align: center;
            overflow: hidden;
            box-shadow: 0 4px 20px rgba(0,0,0,0.2);
        }

        #bgCanvas {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 0;
            opacity: 0.6;
        }

        .header-content {
            position: relative;
            z-index: 1;
            animation: slideDown 1s ease-out;
        }

        h1 {
            font-size: 2.5rem;
            margin-bottom: 0.5rem;
            text-shadow: 0 2px 10px rgba(0,0,0,0.3);
        }

        .subtitle {
            font-size: 1.1rem;
            opacity: 0.9;
            background: rgba(0,0,0,0.2);
            padding: 5px 15px;
            border-radius: 20px;
        }

        /* --- Main Layout --- */
        main {
            max-width: 900px;
            margin: -40px auto 40px;
            padding: 0 20px;
            position: relative;
            z-index: 2;
        }

        /* --- Cards --- */
        .card {
            background: var(--card-bg);
            border-radius: 16px;
            padding: 2rem;
            margin-bottom: 2rem;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            transition: transform 0.3s ease;
            backdrop-filter: blur(10px);
        }

        .card:hover {
            transform: translateY(-5px);
        }

        h2 {
            color: var(--primary);
            border-left: 5px solid var(--secondary);
            padding-left: 15px;
            margin-bottom: 1.5rem;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        /* --- Animations --- */
        @keyframes slideDown {
            from { transform: translateY(-50px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        @keyframes float {
            0% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
            100% { transform: translateY(0px); }
        }

        /* --- Concept Visualization --- */
        .concept-container {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            justify-content: center;
            margin-bottom: 20px;
        }

        .concept-box {
            background: white;
            padding: 20px;
            border-radius: 12px;
            border: 1px solid #eee;
            flex: 1;
            min-width: 200px;
            text-align: center;
        }

        .icon-large {
            font-size: 2rem;
            margin-bottom: 10px;
            display: block;
            animation: float 3s ease-in-out infinite;
        }

        .highlight-text {
            color: var(--primary);
            font-weight: bold;
            background: rgba(108, 92, 231, 0.1);
            padding: 2px 5px;
            border-radius: 4px;
        }

        /* --- Pseudocode Block --- */
        .code-block {
            background: var(--code-bg);
            color: #d4d4d4;
            padding: 1.5rem;
            border-radius: 8px;
            font-family: 'Consolas', 'Monaco', monospace;
            font-size: 0.95rem;
            overflow-x: auto;
            border-left: 4px solid var(--accent);
            margin: 1rem 0;
            line-height: 1.5;
        }
        .code-keyword { color: #569cd6; }
        .code-comment { color: #6a9955; }
        .code-func { color: #dcdcaa; }
        .code-var { color: #9cdcfe; }

        /* --- Vertical Calculation Visual --- */
        .vertical-calc-wrapper {
            display: flex;
            flex-wrap: wrap;
            gap: 2rem;
            align-items: flex-start;
            justify-content: center;
            background: #f8f9fa;
            padding: 20px;
            border-radius: 12px;
            margin-bottom: 20px;
        }

        .vertical-grid {
            font-family: 'Courier New', monospace;
            font-size: 1.5rem;
            line-height: 2rem;
            text-align: right;
            letter-spacing: 0.5rem;
        }

        .calc-explanation {
            flex: 1;
            min-width: 250px;
            font-size: 0.95rem;
        }

        .digit-circle {
            display: inline-block;
            width: 30px;
            height: 30px;
            line-height: 30px;
            text-align: center;
            border-radius: 50%;
            color: white;
            font-weight: bold;
            font-size: 1.1rem;
            margin: 0 2px;
        }
        .c-orange { background-color: #e67e22; }
        .c-green { background-color: #27ae60; }
        .c-blue { background-color: #2980b9; }
        .c-red { background-color: #c0392b; }
        .c-purple { background-color: #8e44ad; }
        .c-cyan { background-color: #16a085; }

        /* --- The Interactive Visualizer --- */
        .math-viz-stage {
            background: var(--code-bg);
            color: white;
            padding: 20px;
            border-radius: 12px;
            font-family: 'Courier New', monospace;
            position: relative;
            overflow: hidden;
            min-height: 200px;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
        }

        .array-row {
            display: flex;
            gap: 10px;
            margin: 10px 0;
        }

        .digit-box {
            width: 40px;
            height: 40px;
            border: 2px solid #555;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
            border-radius: 8px;
            background: #333;
            transition: all 0.4s ease;
            position: relative;
        }

        .digit-box.active {
            border-color: var(--secondary);
            background: var(--primary);
            transform: scale(1.15);
            z-index: 10;
        }

        .digit-box.target {
            border-color: var(--accent);
            box-shadow: 0 0 15px var(--accent);
        }

        .digit-box span.index {
            position: absolute;
            top: -15px;
            font-size: 0.7rem;
            color: #888;
        }

        .formula-display {
            margin-top: 20px;
            padding: 10px;
            background: rgba(255,255,255,0.1);
            border-radius: 8px;
            font-size: 1rem;
            text-align: center;
        }

        /* --- Interactive Section Controls --- */
        .controls {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin: 20px 0;
            flex-wrap: wrap;
        }

        input[type="number"] {
            padding: 10px;
            border-radius: 8px;
            border: 2px solid #ddd;
            width: 100px;
            font-size: 1rem;
            text-align: center;
        }

        button {
            padding: 10px 20px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: bold;
            font-size: 1rem;
            transition: all 0.2s;
        }

        .btn-primary { background: var(--primary); color: white; box-shadow: 0 4px 0 #4834d4; }
        .btn-primary:active { transform: translateY(4px); box-shadow: none; }
        .btn-reset { background: var(--accent); color: white; box-shadow: 0 4px 0 #d63031; }
        .btn-reset:active { transform: translateY(4px); box-shadow: none; }

        .log-panel {
            background: #f1f2f6;
            padding: 15px;
            border-radius: 8px;
            height: 120px;
            overflow-y: auto;
            font-size: 0.9rem;
            border-left: 4px solid var(--primary);
        }
        .log-entry { margin-bottom: 5px; border-bottom: 1px solid #ddd; padding-bottom: 2px; }

        /* --- Footer --- */
        footer {
            text-align: center;
            padding: 2rem;
            color: rgba(255,255,255,0.8);
            font-size: 0.9rem;
            background: rgba(0,0,0,0.2);
        }

        @media (max-width: 600px) {
            h1 { font-size: 2rem; }
            .digit-box { width: 30px; height: 30px; font-size: 1rem; }
        }
    </style>
</head>
<body>

<header>
    <canvas id="bgCanvas"></canvas>
    <div class="header-content">
        <h1>é«˜ç²¾åº¦ä¹˜æ³•</h1>
        <div class="subtitle">High-Precision Multiplication</div>
    </div>
</header>

<main>
    <section class="card">
        <h2>ğŸ“ ç«–å¼æ·±åº¦è§£æ (Visual Analysis)</h2>
        <p>é«˜ç²¾åº¦ä¹˜æ³•çš„æœ¬è´¨æ˜¯æ¨¡æ‹Ÿæˆ‘ä»¬å°å­¦å­¦ä¹ çš„åˆ—ç«–å¼è®¡ç®—ã€‚ä½†ç¨‹åºä¸­æˆ‘ä»¬ä¸éœ€è¦åƒæ‰‹ç®—é‚£æ ·"é”™ä½ç›¸åŠ "ï¼Œè€Œæ˜¯åˆ©ç”¨æ•°ç»„ä¸‹æ ‡çš„è§„å¾‹ç›´æ¥ç´¯åŠ ã€‚</p>
        <p><strong>æ ¸å¿ƒè§„å¾‹ï¼š</strong>å‚ä¸è¿ç®—çš„ä¸¤ä¸ªæ•° <var>A</var> çš„ç¬¬ <var>i</var> ä½ä¸ <var>B</var> çš„ç¬¬ <var>j</var> ä½ç›¸ä¹˜ï¼Œç»“æœä¼šè´¡çŒ®åˆ° <var>C</var> çš„ç¬¬ <var>i+j</var> ä½ï¼ˆå‡è®¾ä»ä½ä½åˆ°é«˜ä½ä¸‹æ ‡ä¸º0, 1, 2...ï¼‰ã€‚</p>
        
        <div class="vertical-calc-wrapper">
            <div class="vertical-grid">
                <div><span class="digit-circle c-orange">1</span><span class="digit-circle c-orange">2</span><span class="digit-circle c-green">3</span><span class="digit-circle c-blue">4</span></div>
                <div>Ã— &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="digit-circle c-green">5</span><span class="digit-circle c-red">6</span></div>
                <div style="border-bottom: 2px solid #333; margin: 5px 0;"></div>
                <div><span class="digit-circle c-purple">7</span><span class="digit-circle c-orange">4</span><span class="digit-circle c-cyan">0</span><span class="digit-circle c-blue">4</span></div>
                <div><span class="digit-circle c-purple">6</span><span class="digit-circle c-purple">1</span><span class="digit-circle c-orange">7</span><span class="digit-circle c-cyan">0</span>&nbsp;</div>
                <div style="border-bottom: 2px solid #333; margin: 5px 0;"></div>
                <div><span class="digit-circle c-purple">6</span><span class="digit-circle c-green">9</span><span class="digit-circle c-blue">1</span><span class="digit-circle c-green">0</span><span class="digit-circle c-blue">4</span></div>
            </div>

            <div class="calc-explanation">
                <h3>ä½ç½®å¯¹åº”å…³ç³» (Index Logic)</h3>
                <ul style="list-style: none; padding-left: 0;">
                    <li style="margin-bottom: 8px;">
                        <span class="digit-circle c-blue" style="width:20px;height:20px;line-height:20px;font-size:0.8rem">4</span> ä¸ <span class="digit-circle c-red" style="width:20px;height:20px;line-height:20px;font-size:0.8rem">6</span> ç›¸ä¹˜ï¼Œè´¡çŒ®è‡³ç¬¬ 0 ä½ã€‚
                    </li>
                    <li style="margin-bottom: 8px;">
                        <span class="digit-circle c-green" style="width:20px;height:20px;line-height:20px;font-size:0.8rem">3</span> ä¸ <span class="digit-circle c-red" style="width:20px;height:20px;line-height:20px;font-size:0.8rem">6</span>ï¼Œ<span class="digit-circle c-blue" style="width:20px;height:20px;line-height:20px;font-size:0.8rem">4</span> ä¸ <span class="digit-circle c-green" style="width:20px;height:20px;line-height:20px;font-size:0.8rem">5</span> ç›¸ä¹˜ï¼Œè´¡çŒ®è‡³ç¬¬ 1 ä½ã€‚
                    </li>
                    <li style="margin-bottom: 8px;">
                        <span class="digit-circle c-orange" style="width:20px;height:20px;line-height:20px;font-size:0.8rem">2</span> ä¸ <span class="digit-circle c-red" style="width:20px;height:20px;line-height:20px;font-size:0.8rem">6</span>ï¼Œ<span class="digit-circle c-green" style="width:20px;height:20px;line-height:20px;font-size:0.8rem">3</span> ä¸ <span class="digit-circle c-green" style="width:20px;height:20px;line-height:20px;font-size:0.8rem">5</span> ç›¸ä¹˜ï¼Œè´¡çŒ®è‡³ç¬¬ 2 ä½ã€‚
                    </li>
                </ul>
                <div style="margin-top: 15px; padding: 10px; background: #eef; border-radius: 6px;">
                    <strong>ç»“è®ºï¼š</strong> é«˜ç²¾åº¦ä¹˜æ³•çš„è¿ç®—æ—¶é—´ä¸å‚ä¸è¿ç®—çš„ä¸¤ä¸ªæ•´æ•°ä¸­é•¿åº¦è¾ƒé•¿è€…çš„ä½æ•°æœ‰å…³ï¼Œç¡®åˆ‡åœ°è¯´æ˜¯ <span class="highlight-text">O(nÂ²)</span>ï¼ˆå…¶ä¸­nä¸ºæ€»ä½æ•°ï¼‰ã€‚ä½æ•°è¶Šå¤šï¼Œéœ€è¦éå†è®¡ç®—çš„ <var>i*j</var> ç»„åˆå°±è¶Šå¤šã€‚
                </div>
            </div>
        </div>
    </section>

    <section class="card">
        <h2>ğŸ’» æ ¸å¿ƒç®—æ³•ä¸ä¼ªä»£ç  (Algorithm)</h2>
        <p>ä»¥ä¸‹æ˜¯ Python å’Œ C++ é€šç”¨çš„ç®—æ³•é€»è¾‘ã€‚æ ¸å¿ƒåœ¨äºä¸‰æ­¥ï¼š<strong>å€’åºå­˜å‚¨</strong>ã€<strong>ä¸è¿›ä½ç´¯åŠ </strong>ã€<strong>ç»Ÿä¸€å¤„ç†è¿›ä½</strong>ã€‚</p>
        
        <div class="code-block">
<pre>
<span class="code-comment">// å‡è®¾ A å’Œ B å·²ç»æ˜¯å€’åºå­˜å‚¨æ•°å­—çš„æ•°ç»„/åˆ—è¡¨
// ä¾‹å¦‚ 123 å­˜å‚¨ä¸º [3, 2, 1]
// C æ˜¯ç»“æœæ•°ç»„ï¼Œåˆå§‹åŒ–ä¸º 0</span>

<span class="code-func">Function</span> HighPrecisionMultiply(A, B):
    <span class="code-comment">// 1. åˆå§‹åŒ–ç»“æœæ•°ç»„ï¼Œæœ€å¤§é•¿åº¦ä¸ºä¸¤æ•°é•¿åº¦ä¹‹å’Œ</span>
    lenA = Length(A)
    lenB = Length(B)
    C = NewArray(Size = lenA + lenB, InitValue = 0)

    <span class="code-comment">// 2. é€ä½ç›¸ä¹˜ (æ ¸å¿ƒé€»è¾‘)</span>
    <span class="code-keyword">For</span> i <span class="code-keyword">From</span> 0 <span class="code-keyword">To</span> lenA - 1:
        <span class="code-keyword">For</span> j <span class="code-keyword">From</span> 0 <span class="code-keyword">To</span> lenB - 1:
            <span class="code-comment">// æ­¤æ—¶å…ˆä¸å¤„ç†è¿›ä½ï¼Œåªç®¡ç´¯åŠ </span>
            C[i + j] = C[i + j] + (A[i] * B[j])

    <span class="code-comment">// 3. ç»Ÿä¸€å¤„ç†è¿›ä½</span>
    <span class="code-keyword">For</span> k <span class="code-keyword">From</span> 0 <span class="code-keyword">To</span> Length(C) - 2:
        <span class="code-keyword">If</span> C[k] >= 10:
            C[k + 1] = C[k + 1] + (C[k] / 10)  <span class="code-comment">// è¿›ä½åˆ°ä¸‹ä¸€ä½</span>
            C[k] = C[k] % 10                   <span class="code-comment">// å½“å‰ä½ä¿ç•™ä¸ªä½</span>

    <span class="code-comment">// 4. å»é™¤å‰å¯¼é›¶å¹¶åè½¬è¾“å‡º</span>
    RemoveTrailingZeros(C) <span class="code-comment">// å› ä¸ºæ˜¯å€’åºï¼Œé«˜ä½åœ¨æ•°ç»„æœ«å°¾</span>
    Reverse(C)
    <span class="code-keyword">Return</span> C
</pre>
        </div>
    </section>

    <section class="card">
        <h2>ğŸš€ äº’åŠ¨æ¼”ç¤º (Interactive Demo)</h2>
        <p>è¾“å…¥ä¸¤ä¸ªè¾ƒå°çš„æ•°å­—ï¼ˆä¸ºäº†æ¼”ç¤ºæ•ˆæœï¼Œå»ºè®®2-3ä½ï¼‰ï¼Œè§‚å¯Ÿé«˜ç²¾åº¦ä¹˜æ³•æ˜¯å¦‚ä½•é€ä½è®¡ç®—çš„ã€‚</p>
        
        <div class="controls">
            <input type="number" id="numA" value="13" placeholder="Num A" min="1" max="999">
            <span style="font-size:1.5rem; align-self:center;">Ã—</span>
            <input type="number" id="numB" value="5" placeholder="Num B" min="1" max="999">
            <button class="btn-primary" onclick="startSimulation()">â–¶ å¼€å§‹æ¼”ç¤º (Start)</button>
            <button class="btn-reset" onclick="resetDemo()">â†º é‡ç½® (Reset)</button>
        </div>

        <div class="math-viz-stage" id="vizStage">
            <div style="opacity: 0.5;">ç‚¹å‡»â€œå¼€å§‹æ¼”ç¤ºâ€æŸ¥çœ‹åŠ¨ç”»è¿‡ç¨‹...</div>
        </div>

        <div class="formula-display" id="formulaDisplay">
            å½“å‰è®¡ç®—: ç­‰å¾…å¼€å§‹...
        </div>

        <div class="log-panel" id="logPanel"></div>
    </section>

    <section class="card" style="border-left-color: var(--accent);">
        <h2>ğŸ“ çŸ¥è¯†ç‚¹æ€»ç»“ (Summary)</h2>
        <ul style="list-style-type: none; padding-left: 0;">
            <li style="margin-bottom: 10px; display: flex; align-items: start;">
                <span style="margin-right: 10px; color: var(--secondary);">âœ”</span>
                <div>
                    <strong>æ•°æ®ç»“æ„:</strong> ä½¿ç”¨ <code>int</code> æ•°ç»„å­˜å‚¨æ¯ä¸€ä½æ•°å­—ï¼Œå¿…é¡»å…ˆ<strong>åè½¬</strong>å­—ç¬¦ä¸²ï¼Œè®©ä¸ªä½å¯¹é½æ•°ç»„ä¸‹æ ‡ 0ã€‚
                </div>
            </li>
            <li style="margin-bottom: 10px; display: flex; align-items: start;">
                <span style="margin-right: 10px; color: var(--secondary);">âœ”</span>
                <div>
                    <strong>æ ¸å¿ƒå…¬å¼:</strong> <var>C[i + j]</var> += <var>A[i]</var> Ã— <var>B[j]</var>ã€‚è¿™æ˜¯ç†è§£é«˜ç²¾åº¦ä¹˜æ³•æœ€å…³é”®çš„ä¸€æ­¥ã€‚
                </div>
            </li>
            <li style="margin-bottom: 10px; display: flex; align-items: start;">
                <span style="margin-right: 10px; color: var(--secondary);">âœ”</span>
                <div>
                    <strong>è¿›ä½ç­–ç•¥:</strong> æ¨èâ€œå…ˆå…¨ä¹˜ï¼Œåè¿›ä½â€ã€‚è¿™æ ·ä»£ç å†™èµ·æ¥æ›´ç®€æ´ï¼Œä¸å®¹æ˜“å‡ºé”™ã€‚
                </div>
            </li>
            <li style="margin-bottom: 10px; display: flex; align-items: start;">
                <span style="margin-right: 10px; color: var(--secondary);">âœ”</span>
                <div>
                    <strong>æ—¶é—´å¤æ‚åº¦:</strong> æ¯ä¸€ä½éƒ½è¦å’Œå¦ä¸€æ•°çš„æ¯ä¸€ä½ç›¸ä¹˜ï¼Œæ‰€ä»¥æ˜¯ <span class="highlight-text">O(N Ã— M)</span>ï¼Œå³å¹³æ–¹çº§åˆ«å¤æ‚åº¦ã€‚
                </div>
            </li>
        </ul>
    </section>
</main>

<footer>
    Designed with Logic & Magic | EdTech 2025
</footer>

<script>
    // --- Canvas Background (Particles) ---
    const canvas = document.getElementById('bgCanvas');
    const ctx = canvas.getContext('2d');
    
    let width, height;
    let particles = [];

    function resize() {
        width = canvas.width = window.innerWidth;
        height = canvas.height = 250;
    }
    window.addEventListener('resize', resize);
    resize();

    class Particle {
        constructor() {
            this.x = Math.random() * width;
            this.y = Math.random() * height;
            this.vx = (Math.random() - 0.5) * 1;
            this.vy = (Math.random() - 0.5) * 1;
            this.size = Math.random() * 2;
            this.alpha = Math.random() * 0.5 + 0.1;
        }
        update() {
            this.x += this.vx;
            this.y += this.vy;
            if(this.x < 0) this.x = width;
            if(this.x > width) this.x = 0;
            if(this.y < 0) this.y = height;
            if(this.y > height) this.y = 0;
        }
        draw() {
            ctx.fillStyle = `rgba(255, 255, 255, ${this.alpha})`;
            ctx.beginPath();
            ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
            ctx.fill();
        }
    }

    for(let i=0; i<60; i++) particles.push(new Particle());

    function animateBg() {
        ctx.clearRect(0, 0, width, height);
        particles.forEach(p => { p.update(); p.draw(); });
        requestAnimationFrame(animateBg);
    }
    animateBg();

    // --- High Precision Logic & Visualization ---

    const vizStage = document.getElementById('vizStage');
    const logPanel = document.getElementById('logPanel');
    const formulaDisplay = document.getElementById('formulaDisplay');
    let isRunning = false;

    function log(msg) {
        const div = document.createElement('div');
        div.className = 'log-entry';
        div.innerHTML = msg;
        logPanel.appendChild(div);
        logPanel.scrollTop = logPanel.scrollHeight;
    }

    function createDigitBox(num, index, idPrefix) {
        const box = document.createElement('div');
        box.className = 'digit-box';
        box.id = `${idPrefix}-${index}`;
        box.innerHTML = `${num}<span class="index">${index}</span>`;
        return box;
    }

    function resetDemo() {
        vizStage.innerHTML = '<div style="opacity: 0.5;">å‡†å¤‡å°±ç»ªï¼Œç‚¹å‡»å¼€å§‹...</div>';
        logPanel.innerHTML = '';
        formulaDisplay.innerHTML = 'ç­‰å¾…å¼€å§‹...';
        formulaDisplay.style.background = 'rgba(255,255,255,0.1)';
        formulaDisplay.style.color = '#fff';
        isRunning = false;
    }

    async function wait(ms) {
        return new Promise(resolve => setTimeout(resolve, ms));
    }

    async function startSimulation() {
        if(isRunning) return;
        isRunning = true;
        
        const strA = document.getElementById('numA').value;
        const strB = document.getElementById('numB').value;

        // 1. Data Preparation (Reverse)
        const A = strA.split('').reverse().map(Number);
        const B = strB.split('').reverse().map(Number);
        const lenC = A.length + B.length;
        const C = new Array(lenC).fill(0);

        // 2. Setup UI
        vizStage.innerHTML = '';
        logPanel.innerHTML = '';
        
        // Container for A
        const rowA = document.createElement('div');
        rowA.className = 'array-row';
        rowA.innerHTML = '<div style="width:30px; line-height:40px;">A:</div>';
        A.forEach((n, i) => rowA.appendChild(createDigitBox(n, i, 'a')));
        vizStage.appendChild(rowA);

        // Container for B
        const rowB = document.createElement('div');
        rowB.className = 'array-row';
        rowB.innerHTML = '<div style="width:30px; line-height:40px;">B:</div>';
        B.forEach((n, i) => rowB.appendChild(createDigitBox(n, i, 'b')));
        vizStage.appendChild(rowB);

        // Separator
        const hr = document.createElement('hr');
        hr.style.width = '100%';
        hr.style.borderColor = '#555';
        hr.style.margin = '10px 0';
        vizStage.appendChild(hr);

        // Container for C (Result)
        const rowC = document.createElement('div');
        rowC.className = 'array-row';
        rowC.innerHTML = '<div style="width:30px; line-height:40px;">C:</div>';
        // Create C boxes
        for(let k=0; k<lenC; k++) {
            rowC.appendChild(createDigitBox(0, k, 'c'));
        }
        vizStage.appendChild(rowC);
        
        log("ğŸ”¢ <strong>Step 1:</strong> å­—ç¬¦ä¸²åè½¬å­˜å‚¨åˆ°æ•°ç»„ A å’Œ Bã€‚");
        await wait(1000);

        // 3. Multiplication Phase
        log("âœ–ï¸ <strong>Step 2:</strong> é€ä½ç›¸ä¹˜ (Accumulation)");
        
        for(let i=0; i<A.length; i++) {
            for(let j=0; j<B.length; j++) {
                // Highlight A[i] and B[j]
                const boxA = document.getElementById(`a-${i}`);
                const boxB = document.getElementById(`b-${j}`);
                const boxC = document.getElementById(`c-${i+j}`);

                boxA.classList.add('active');
                boxB.classList.add('active');
                boxC.classList.add('target');

                const product = A[i] * B[j];
                const oldVal = C[i+j];
                C[i+j] += product;

                formulaDisplay.innerHTML = `i=${i}, j=${j} <br> <strong>C[${i}+${j}]</strong> += A[${i}] Ã— B[${j}] <br> C[${i+j}] = ${oldVal} + ${A[i]}Ã—${B[j]} = <strong>${C[i+j]}</strong>`;
                
                log(`A[${i}](${A[i]}) Ã— B[${j}](${B[j]}) = ${product}. åŠ å…¥åˆ° C[${i+j}]`);
                
                // Update C visual
                boxC.innerHTML = `${C[i+j]}<span class="index">${i+j}</span>`;
                boxC.style.transform = 'scale(1.2)';

                await wait(1200);

                // Reset styles
                boxA.classList.remove('active');
                boxB.classList.remove('active');
                boxC.classList.remove('target');
                boxC.style.transform = 'scale(1)';
                await wait(300);
            }
        }

        // 4. Carry Phase
        log("â¬†ï¸ <strong>Step 3:</strong> ç»Ÿä¸€è¿›ä½å¤„ç† (Carry Processing)");
        formulaDisplay.innerHTML = "æ­£åœ¨å¤„ç†è¿›ä½...";
        
        for(let k=0; k<lenC; k++) {
            if(C[k] >= 10) {
                const boxC = document.getElementById(`c-${k}`);
                const boxNext = document.getElementById(`c-${k+1}`);
                
                boxC.classList.add('active');
                if(boxNext) boxNext.classList.add('target');

                const val = C[k];
                const carry = Math.floor(val / 10);
                const remain = val % 10;
                
                C[k] = remain;
                if(k+1 < lenC) {
                    C[k+1] += carry;
                }

                log(`C[${k}] æ˜¯ ${val}ã€‚ä¿ç•™ ${remain}ï¼Œè¿›ä½ ${carry} åˆ° C[${k+1}]`);
                
                formulaDisplay.innerHTML = `C[${k}] >= 10 <br> ä¿ç•™: ${remain}, è¿›ä½: ${carry}`;

                await wait(500);
                
                // Update visuals
                boxC.innerHTML = `${C[k]}<span class="index">${k}</span>`;
                if(boxNext) {
                    boxNext.innerHTML = `${C[k+1]}<span class="index">${k+1}</span>`;
                }

                await wait(800);
                boxC.classList.remove('active');
                if(boxNext) boxNext.classList.remove('target');
            }
        }

        // 5. Final Result
        // Remove leading zeros
        let realLen = lenC;
        while(realLen > 1 && C[realLen-1] === 0) {
            const box = document.getElementById(`c-${realLen-1}`);
            if(box) box.style.opacity = '0.2';
            realLen--;
        }

        const finalResult = C.slice(0, realLen).reverse().join('');
        formulaDisplay.innerHTML = `è®¡ç®—å®Œæˆ!`;
        formulaDisplay.style.background = 'var(--secondary)';
        formulaDisplay.style.color = '#000';
        
        log(`âœ… <strong>Step 4:</strong> å»é™¤å‰å¯¼é›¶ï¼Œå€’åºè¾“å‡ºã€‚`);
        log(`ğŸ‰ æœ€ç»ˆç»“æœ: <span style="font-size:1.2rem; color:var(--primary)">${finalResult}</span>`);

        isRunning = false;
    }

</script>

</body>
</html>