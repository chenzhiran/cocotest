<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç¬¬3è¯¾ï¼šè®©ç¨‹åº"æ€è€ƒ" | CS Explorer</title>
    <style>
        /* --- 1. å…¨å±€è®¾ç½®ä¸å˜é‡ --- */
        :root {
            --bg-color: #e0e5ec;
            --text-main: #4a4a4a;
            --primary: #4d79ff; /* é€»è¾‘è“ */
            --success: #00b894; /* çœŸ/æ‰§è¡Œ */
            --danger: #ff7675;  /* å‡/Else */
            --shadow-light: #ffffff;
            --shadow-dark: #a3b1c6;
            --code-bg: #2d3436;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Segoe UI', Roboto, Helvetica, sans-serif; }

        body {
            background-color: var(--bg-color);
            color: var(--text-main);
            line-height: 1.6;
            padding: 20px;
            min-height: 100vh;
        }

        .container { max-width: 900px; margin: 0 auto; }

        /* --- 2. ç»„ä»¶æ ·å¼ (æ–°æ‹Ÿæ€é£æ ¼) --- */
        .card {
            background: var(--bg-color);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 40px;
            box-shadow: 9px 9px 16px var(--shadow-dark), -9px -9px 16px var(--shadow-light);
            border: 1px solid rgba(255,255,255,0.2);
            transition: transform 0.3s ease;
        }

        h1, h2, h3 { color: #2d3436; margin-bottom: 15px; letter-spacing: 0.5px; }
        h1 { font-size: 2.2rem; text-align: center; color: var(--primary); }
        h2 { border-left: 5px solid var(--primary); padding-left: 15px; margin-top: 10px; }
        
        .bilingual {
            font-size: 0.85em;
            color: #888;
            font-weight: normal;
            background: rgba(0,0,0,0.05);
            padding: 2px 8px;
            border-radius: 10px;
            margin-left: 8px;
            vertical-align: middle;
        }

        .highlight { color: var(--primary); font-weight: bold; }
        .tag-true { color: var(--success); font-weight: bold; }
        .tag-false { color: var(--danger); font-weight: bold; }

        /* --- 3. é”šç‚¹äº’åŠ¨ï¼šæ™ºèƒ½é—¨é“ƒ --- */
        .doorbell-section { text-align: center; }
        
        .doorbell-btn {
            width: 120px; height: 120px;
            border-radius: 50%;
            border: none;
            background: var(--bg-color);
            box-shadow: 8px 8px 16px var(--shadow-dark), -8px -8px 16px var(--shadow-light);
            cursor: pointer;
            position: relative;
            outline: none;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto;
        }
        
        .doorbell-btn:active, .doorbell-btn.pressed {
            box-shadow: inset 6px 6px 10px var(--shadow-dark), inset -6px -6px 10px var(--shadow-light);
        }

        .bell-icon { font-size: 3rem; color: #888; transition: color 0.3s; }
        .doorbell-btn.pressed .bell-icon { color: var(--primary); text-shadow: 0 0 15px var(--primary); }

        .log-box {
            margin-top: 20px;
            background: #f1f3f6;
            padding: 15px;
            border-radius: 10px;
            font-family: monospace;
            min-height: 60px;
            box-shadow: inset 4px 4px 8px var(--shadow-dark), inset -4px -4px 8px var(--shadow-light);
            color: #555;
        }

        /* --- 4. æ ¸å¿ƒæ¦‚å¿µï¼šæµç¨‹å›¾åŠ¨ç”» --- */
        .flowchart-container {
            position: relative;
            height: 250px;
            background: transparent;
            display: flex;
            justify-content: center;
            margin-top: 20px;
        }

        /* è·¯å¾„çº¿æ¡ */
        .path-svg {
            position: absolute;
            top: 0;
            width: 100%;
            height: 100%;
            z-index: 1;
        }
        
        /* èŠ‚ç‚¹ */
        .node {
            position: absolute;
            background: var(--bg-color);
            padding: 10px 20px;
            border-radius: 10px;
            box-shadow: 5px 5px 10px var(--shadow-dark), -5px -5px 10px var(--shadow-light);
            z-index: 2;
            font-size: 0.9rem;
            font-weight: bold;
            text-align: center;
        }
        
        .node-start { top: 0; left: 50%; transform: translateX(-50%); border: 2px solid var(--primary); }
        .node-true { top: 150px; left: 20%; border: 2px solid var(--success); color: var(--success); }
        .node-false { top: 150px; right: 20%; border: 2px solid var(--danger); color: var(--danger); }
        
        /* ç§»åŠ¨çš„æ•°æ®çƒ */
        .data-ball {
            width: 20px; height: 20px;
            background: var(--primary);
            border-radius: 50%;
            position: absolute;
            top: 40px; left: 50%;
            transform: translate(-50%, 0);
            z-index: 3;
            box-shadow: 0 0 10px var(--primary);
        }
        
        /* å®šä¹‰åŠ¨ç”» */
        @keyframes flowLeft {
            0% { top: 40px; left: 50%; background: var(--primary); }
            40% { top: 80px; left: 50%; background: var(--primary); }
            60% { top: 100px; left: 20%; background: var(--success); } /* å˜ç»¿ */
            100% { top: 150px; left: 20%; background: var(--success); opacity: 0; }
        }
        @keyframes flowRight {
            0% { top: 40px; left: 50%; background: var(--primary); }
            40% { top: 80px; left: 50%; background: var(--primary); }
            60% { top: 100px; right: 20%; background: var(--danger); } /* å˜çº¢ */
            100% { top: 150px; right: 20%; background: var(--danger); opacity: 0; }
        }

        .anim-left { animation: flowLeft 2s infinite ease-in-out; }
        .anim-right { animation: flowRight 2s infinite ease-in-out; }

        /* --- 5. æ¸¸æˆäº’åŠ¨åŒºåŸŸ --- */
        .game-wrapper {
            display: flex;
            gap: 20px;
            flex-wrap: wrap;
        }
        
        .game-canvas-box {
            flex: 1;
            min-width: 300px;
            text-align: center;
        }
        
        canvas {
            background: #333;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
            cursor: none; /* éšè—é¼ æ ‡ï¼Œç”¨è§’è‰²ä»£æ›¿ */
        }

        .code-brain {
            flex: 1;
            min-width: 300px;
            background: var(--code-bg);
            border-radius: 10px;
            padding: 20px;
            color: #dcdcdc;
            font-family: 'Consolas', monospace;
            font-size: 0.95rem;
            position: relative;
            box-shadow: inset 0 0 20px rgba(0,0,0,0.5);
        }

        .code-line {
            padding: 4px 8px;
            border-radius: 4px;
            margin-bottom: 2px;
            transition: background 0.1s;
        }
        
        /* ä»£ç é«˜äº®æ ·å¼ */
        .active-check { background: rgba(255, 255, 255, 0.2); }
        .active-true { background: rgba(46, 204, 113, 0.3); border-left: 4px solid #2ecc71; color: #fff; }
        .active-else { background: rgba(231, 76, 60, 0.3); border-left: 4px solid #e74c3c; color: #fff; }

        .score-board {
            font-size: 1.5rem;
            font-weight: bold;
            color: var(--primary);
            margin-bottom: 10px;
        }

        /* --- 6. æ€»ç»“å¡ç‰‡ --- */
        .summary-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
        }
        .tip-box {
            background: rgba(255,255,255,0.5);
            padding: 15px;
            border-radius: 10px;
            border-left: 4px solid #ccc;
        }
        .tip-pitfall { border-color: var(--danger); }
        .tip-exam { border-color: var(--primary); }

        footer { text-align: center; color: #888; font-size: 0.9rem; margin-top: 50px; }

        @media (max-width: 600px) {
            .game-wrapper { flex-direction: column-reverse; }
            .node { font-size: 0.7rem; padding: 8px; }
            .node-true { left: 5px; } .node-false { right: 5px; }
        }
    </style>
</head>
<body>

<div class="container">

    <header class="card" style="text-align: center; border-top: 5px solid var(--primary);">
        <h1>è®©ç¨‹åº"æ€è€ƒ"ï¼šæ¡ä»¶åˆ¤æ–­ <br> <span style="font-size:0.6em; color:#7f8c8d;">Making Programs Think: Conditionals</span></h1>
        <p style="margin-top:15px; max-width: 600px; margin-left: auto; margin-right: auto;">
            ä¸ºä»€ä¹ˆæ¸¸æˆè§’è‰²ç¢°åˆ°æ•Œäººä¼šæ‰£è¡€ï¼Ÿä¸ºä»€ä¹ˆæ™ºèƒ½é—¨é“ƒçŸ¥é“æœ‰äººæ¥äº†ï¼Ÿ<br>
            å› ä¸ºç¨‹åºå­¦ä¼šäº†åšé€‰æ‹©é¢˜ï¼š<strong>IF (å¦‚æœ)... ELSE (å¦åˆ™)...</strong>
        </p>
    </header>

    <section class="card doorbell-section">
        <h2>1. ç”Ÿæ´»ä¸­çš„"å¦‚æœ" <span class="bilingual">The "IF" in Life</span></h2>
        <p>è¯•ç€ç‚¹å‡»ä¸‹é¢çš„æ™ºèƒ½é—¨é“ƒã€‚è§‚å¯Ÿå®ƒçš„æ€è€ƒè¿‡ç¨‹ã€‚</p>
        
        <div style="margin: 30px 0;">
            <button class="doorbell-btn" id="doorbell" onmousedown="pressBell()" onmouseup="releaseBell()" onmouseleave="releaseBell()">
                <div class="bell-icon">ğŸ””</div>
            </button>
        </div>

        <div class="log-box" id="doorbell-log">
            > System Ready. Waiting for input...
        </div>
    </section>

    <section class="card">
        <h2>2. ç¨‹åºæµæ§åˆ¶ <span class="bilingual">Control Flow</span></h2>
        <p>ä»£ç é€šå¸¸æ˜¯ä»ä¸Šå¾€ä¸‹è·‘çš„ã€‚ä½† <strong>Condition (æ¡ä»¶)</strong> å°±åƒåˆ†å²”è·¯å£ã€‚</p>
        <p>è¿™è¢«ç§°ä¸º <span class="highlight">Boolean Expression (å¸ƒå°”è¡¨è¾¾å¼)</span>ï¼Œç»“æœåªæœ‰ä¸¤ä¸ªï¼š<span class="tag-true">True (çœŸ)</span> æˆ– <span class="tag-false">False (å‡)</span>ã€‚</p>

        <div class="flowchart-container">
            <svg class="path-svg">
                <path d="M450 40 L450 80" stroke="#ccc" stroke-width="2" fill="none" />
                <path d="M450 80 Q450 100 270 150" stroke="#a3b1c6" stroke-width="2" fill="none" />
                <path d="M450 80 Q450 100 630 150" stroke="#a3b1c6" stroke-width="2" fill="none" />
            </svg>

            <div class="node node-start">Is Raining? (ä¸‹é›¨å—?)</div>
            <div class="node node-true">True: Take Umbrella<br>(å¸¦ä¼)</div>
            <div class="node node-false">False: Go Play<br>(å‡ºå»ç©)</div>

            <div class="data-ball" id="demo-ball"></div>
        </div>
        
        <div style="text-align: center; margin-top: 10px;">
            <button onclick="toggleWeather(true)" style="padding: 5px 15px; border-radius: 20px; border:none; background: var(--success); color:white; cursor:pointer;">Set: Raining (True)</button>
            <button onclick="toggleWeather(false)" style="padding: 5px 15px; border-radius: 20px; border:none; background: var(--danger); color:white; cursor:pointer;">Set: Sunny (False)</button>
        </div>
    </section>

    <section class="card">
        <h2>3. è¿·ä½ é¡¹ç›®ï¼šæ¥è‹¹æœ AI <span class="bilingual">Mini Game Logic</span></h2>
        <p>è¿™æ˜¯ä¸€ä¸ªç®€å•çš„"æ¥è‹¹æœ"æ¸¸æˆã€‚ä½†è¿™æ¬¡ï¼Œæˆ‘ä»¬è¦ç›¯ç€å³è¾¹çš„<strong>"ç¨‹åºå¤§è„‘"</strong>çœ‹ã€‚</p>
        <p><strong>ç©æ³•ï¼š</strong> åœ¨é»‘è‰²åŒºåŸŸç§»åŠ¨é¼ æ ‡(æˆ–æ‰‹æŒ‡)æ§åˆ¶è“è‰²æ–¹å—ã€‚å»æ¥ä½ä¸‹è½çš„çº¢è‹¹æœã€‚</p>

        <div class="score-board">Score: <span id="scoreVal">0</span></div>

        <div class="game-wrapper">
            <div class="game-canvas-box">
                <canvas id="gameCanvas" width="300" height="400"></canvas>
                <p style="font-size: 0.8rem; color: #888; margin-top: 5px;">(Touch or Mouse Move to play)</p>
            </div>

            <div class="code-brain">
                <div style="color:#888; margin-bottom:10px;">// æ¯ä¸€å¸§éƒ½åœ¨è¿è¡Œçš„ä»£ç  (Forever Loop)</div>
                
                <div class="code-line" id="line-check">IF (touching_apple == true) THEN</div>
                <div class="code-line" id="line-true" style="padding-left: 20px;">
                    score = score + 1<br>
                    reset_apple() <span style="color:#aaa;">// è‹¹æœå½’ä½</span><br>
                    play_sound("Ding!")
                </div>
                <div class="code-line" id="line-else-head">ELSE</div>
                <div class="code-line" id="line-else-body" style="padding-left: 20px;">
                    apple_y = apple_y + speed <span style="color:#aaa;">// ç»§ç»­ä¸‹è½</span>
                </div>
                <div class="code-line">END IF</div>
                
                <div style="margin-top: 20px; border-top: 1px dashed #555; padding-top:10px;">
                    <div>System Status:</div>
                    <div id="debug-status" style="color: var(--danger);">Touching: FALSE</div>
                </div>
            </div>
        </div>
    </section>

    <section class="card">
        <h2>4. é¿å‘ä¸å¤‡è€ƒ <span class="bilingual">Summary & Tips</span></h2>
        
        <div class="summary-grid">
            <div class="tip-box tip-pitfall">
                <h3 style="color: var(--danger);">ğŸš« å¸¸è§è¯¯åŒº (Pitfalls)</h3>
                <ul style="padding-left: 20px; font-size: 0.9rem;">
                    <li><strong>"If åªåƒå¸ƒå°”é¥­"</strong>: IF åé¢çš„æ‹¬å·é‡Œå¿…é¡»æ˜¯ä¸€ä¸ªèƒ½åˆ¤æ–­çœŸå‡(True/False)çš„å¼å­ï¼Œä¸èƒ½æ˜¯ä¸€æ®µè¯ã€‚</li>
                    <li><strong>Else å¿…é¡»å…œåº•</strong>: Else æ°¸è¿œæ”¾åœ¨æœ€åï¼Œä»£è¡¨"é™¤äº†ä¸Šé¢æ‰€æœ‰æƒ…å†µä¹‹å¤–çš„å…¶ä½™æƒ…å†µ"ã€‚</li>
                </ul>
            </div>
            
            <div class="tip-box tip-exam">
                <h3 style="color: var(--primary);">ğŸ“ å¤‡è€ƒé”¦å›Š (Exam Nuggets)</h3>
                <ul style="padding-left: 20px; font-size: 0.9rem;">
                    <li><strong>Trace (ç¨‹åºè·Ÿè¸ª)</strong>: è€ƒè¯•æ—¶åƒèµ°è¿·å®«ä¸€æ ·ï¼Œæ‰‹æŒ‡æŒ‰ä½ä»£ç ï¼Œæ¡ä»¶ä¸ºçœŸèµ°é‡Œé¢ï¼Œä¸ºå‡è·³è¿‡ã€‚</li>
                    <li><strong>å…³é”®è¯</strong>: Selection (é€‰æ‹©ç»“æ„), Boolean Expression (å¸ƒå°”è¡¨è¾¾å¼)ã€‚</li>
                </ul>
            </div>
        </div>
    </section>

    <footer>
        <p>From AI Decision Trees to Self-Driving Cars, it all starts with "IF".</p>
        <p>&copy; 2023 CS Explorer</p>
    </footer>

</div>

<script>
    /* --- 1. Doorbell Logic --- */
    function pressBell() {
        const btn = document.getElementById('doorbell');
        const log = document.getElementById('doorbell-log');
        btn.classList.add('pressed');
        
        // æ¨¡æ‹Ÿ IF æŒ‰ä¸‹
        log.innerHTML = `<span style="color:var(--primary)">IF (button_pressed == True) THEN</span><br>
                         &nbsp;&nbsp;>> Ring Bell! ğŸ””<br>
                         &nbsp;&nbsp;>> Send Notification to Phone ğŸ“±`;
    }

    function releaseBell() {
        const btn = document.getElementById('doorbell');
        const log = document.getElementById('doorbell-log');
        btn.classList.remove('pressed');
        
        // æ¨¡æ‹Ÿ ELSE æ¾å¼€
        log.innerHTML = `<span style="color:#888">ELSE (button_pressed == False)</span><br>
                         &nbsp;&nbsp;>> Standby (Waiting)... ğŸ’¤`;
    }

    /* --- 2. Flowchart Animation Logic --- */
    const ball = document.getElementById('demo-ball');
    
    function toggleWeather(isRaining) {
        // é‡ç½®åŠ¨ç”»
        ball.classList.remove('anim-left', 'anim-right');
        void ball.offsetWidth; // è§¦å‘ reflow
        
        if (isRaining) {
            ball.classList.add('anim-left');
        } else {
            ball.classList.add('anim-right');
        }
    }
    // é»˜è®¤å¼€å§‹ä¸€ä¸ªåŠ¨ç”»
    toggleWeather(true);


    /* --- 3. Game & Code Visualization Logic --- */
    const canvas = document.getElementById('gameCanvas');
    const ctx = canvas.getContext('2d');
    const scoreEl = document.getElementById('scoreVal');
    const debugEl = document.getElementById('debug-status');

    // Code Line Elements
    const lineCheck = document.getElementById('line-check');
    const lineTrue = document.getElementById('line-true');
    const lineElseHead = document.getElementById('line-else-head');
    const lineElseBody = document.getElementById('line-else-body');

    // Game Variables
    let player = { x: 125, y: 350, w: 50, h: 20, color: '#4d79ff' };
    let apple = { x: 140, y: 0, r: 10, color: '#ff7675', speed: 3 };
    let score = 0;
    let isTouching = false;

    // Mouse/Touch Handling
    function movePlayer(e) {
        const rect = canvas.getBoundingClientRect();
        let clientX = e.clientX;
        if (e.touches && e.touches.length > 0) {
            clientX = e.touches[0].clientX;
        }
        
        let relativeX = clientX - rect.left;
        
        // é™åˆ¶åœ¨ç”»å¸ƒå†…
        if(relativeX > 0 && relativeX < canvas.width) {
            player.x = relativeX - player.w / 2;
        }
    }

    canvas.addEventListener('mousemove', movePlayer);
    canvas.addEventListener('touchmove', movePlayer, {passive: false});

    // Check Collision
    function checkCollision() {
        // ç®€å•çš„çŸ©å½¢/åœ†å½¢ç¢°æ’æ£€æµ‹è¿‘ä¼¼
        if (apple.y + apple.r >= player.y &&
            apple.x >= player.x &&
            apple.x <= player.x + player.w) {
            return true;
        }
        return false;
    }

    // Main Loop
    function gameLoop() {
        // 1. Clear Canvas
        ctx.clearRect(0, 0, canvas.width, canvas.height);

        // 2. Logic Check (The "Brain")
        isTouching = checkCollision();

        // å¯è§†åŒ–ä»£ç é«˜äº®é€»è¾‘
        lineCheck.classList.add('active-check'); // æ°¸è¿œåœ¨æ£€æŸ¥
        
        if (isTouching) {
            // IF True Branch
            score++;
            scoreEl.innerText = score;
            
            // é‡ç½®è‹¹æœ
            apple.y = 0;
            apple.x = Math.random() * (canvas.width - 20) + 10;
            apple.speed = Math.min(apple.speed + 0.2, 8); // å¢åŠ éš¾åº¦
            
            // ä»£ç é«˜äº®
            lineTrue.classList.add('active-true');
            lineElseHead.classList.remove('active-else');
            lineElseBody.classList.remove('active-else');
            
            debugEl.innerHTML = `Touching: <span style="color:var(--success)">TRUE</span>`;
            
        } else {
            // ELSE Branch
            apple.y += apple.speed;
            if (apple.y > canvas.height) {
                apple.y = 0;
                apple.x = Math.random() * (canvas.width - 20) + 10;
                // Missed apple logic could go here
            }

            // ä»£ç é«˜äº®
            lineTrue.classList.remove('active-true');
            lineElseHead.classList.add('active-else');
            lineElseBody.classList.add('active-else');
            
            debugEl.innerHTML = `Touching: <span style="color:var(--danger)">FALSE</span>`;
        }

        // Remove active-check briefly to create blinking effect or just keep it steady? 
        // Keeping it steady is better for readability, let's pulse the True/Else.

        // 3. Draw Elements
        // Player
        ctx.fillStyle = player.color;
        ctx.fillRect(player.x, player.y, player.w, player.h);
        
        // Apple
        ctx.beginPath();
        ctx.arc(apple.x, apple.y, apple.r, 0, Math.PI*2);
        ctx.fillStyle = apple.color;
        ctx.fill();
        ctx.closePath();

        requestAnimationFrame(gameLoop);
    }

    // Start
    gameLoop();

</script>

</body>
</html>