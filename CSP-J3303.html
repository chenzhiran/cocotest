<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>C++ é­”æ³•è¯¾å ‚ï¼šæ•°å­—å®å®æ‰¾æ’å</title>
    <style>
        /* --- å…¨å±€å¯çˆ±é£æ ¼ --- */
        body {
            font-family: "Comic Sans MS", "YouYuan", "å¹¼åœ†", "Microsoft YaHei", sans-serif;
            background-color: #e0f7fa; /* æ¸…æ–°çš„æ·¡è“è‰²èƒŒæ™¯ */
            color: #555;
            margin: 0;
            padding: 20px;
            line-height: 1.6;
        }

        /* --- A4 æ‰“å°ä¼˜åŒ–å®¹å™¨ --- */
        .container {
            max-width: 800px;
            margin: 0 auto;
            background-color: white;
            padding: 40px;
            border-radius: 20px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
            border: 5px solid #00bcd4; /* è“ç»¿è‰²è¾¹æ¡† */
        }

        /* --- æ ‡é¢˜ä¸å­—å· --- */
        h1 {
            color: #ff9800; /* å……æ»¡æ´»åŠ›çš„æ©™è‰² */
            text-align: center;
            font-size: 2.5em;
            text-shadow: 2px 2px 0px #ffe0b2;
            margin-bottom: 20px;
        }

        h2 {
            color: #9c27b0; /* ç¥ç§˜çš„ç´«è‰² */
            border-bottom: 3px dashed #e1bee7;
            padding-bottom: 10px;
            margin-top: 40px;
            clear: both;
        }

        h3 {
            color: #009688;
            margin-top: 25px;
            font-size: 1.3em;
        }

        /* --- å„ç§è¯´æ˜å¡ç‰‡ --- */
        .card {
            background-color: #fff;
            border-radius: 15px;
            padding: 20px;
            margin: 15px 0;
            border-left: 8px solid #ccc;
            box-shadow: 2px 2px 10px rgba(0,0,0,0.05);
        }

        .card.problem { border-color: #ff9800; background-color: #fff8e1; } /* é¢˜ç›® - é»„è‰²ç³» */
        .card.logic { border-color: #2196f3; background-color: #e3f2fd; }   /* æ€è·¯ - è“è‰²ç³» */
        .card.code-box { border-color: #4caf50; background-color: #e8f5e9; } /* ä»£ç  - ç»¿è‰²ç³» */

        /* --- å¯çˆ±çš„å›¾ç¤ºå…ƒç´  (CSSç”»å›¾) --- */
        .step-visual {
            display: flex;
            justify-content: space-around;
            align-items: center;
            background: #fff;
            padding: 15px;
            border-radius: 10px;
            margin: 10px 0;
            border: 2px dashed #b2ebf2;
        }

        /* æ¨¡æ‹Ÿæ•°ç»„çš„å°æ ¼å­ */
        .num-box {
            width: 60px;
            height: 80px;
            background: #ffcc80;
            border-radius: 8px;
            text-align: center;
            position: relative;
            border: 2px solid #ef6c00;
            display: flex;
            flex-direction: column;
            justify-content: center;
            margin: 5px;
            box-shadow: 3px 3px 0 rgba(0,0,0,0.1);
        }
        
        .num-box span { display: block; line-height: 1.2; }
        .val { font-size: 1.2em; font-weight: bold; color: #d84315; }
        .idx { font-size: 0.7em; color: #555; }
        .rank-tag { 
            position: absolute; 
            top: -10px; right: -10px; 
            background: #f44336; 
            color: white; 
            border-radius: 50%; 
            width: 25px; height: 25px; 
            font-size: 0.8em; 
            line-height: 25px;
            font-weight: bold;
            box-shadow: 1px 1px 3px rgba(0,0,0,0.3);
        }

        /* ç®­å¤´ */
        .arrow-down {
            text-align: center;
            font-size: 30px;
            color: #00bcd4;
            margin: 10px 0;
        }

        /* --- ä»£ç å— --- */
        pre {
            background-color: #263238;
            color: #eceff1;
            padding: 15px;
            border-radius: 10px;
            font-family: Consolas, monospace;
            overflow-x: auto;
            font-size: 0.95em;
        }
        .comment { color: #80cbc4; font-style: italic; } /* æ¸…æ–°çš„è–„è·ç»¿æ³¨é‡Š */
        .keyword { color: #ffab91; font-weight: bold; }
        .type { color: #81d4fa; }

        /* é‡ç‚¹å¼ºè°ƒ */
        .highlight {
            background-color: #fff176;
            padding: 2px 6px;
            border-radius: 4px;
            font-weight: bold;
            color: #e65100;
        }

        /* æ‰“å°è®¾ç½® */
        @media print {
            body { background-color: white; margin: 0; padding: 0; }
            .container { box-shadow: none; border: none; width: 100%; padding: 10px; }
            .card { break-inside: avoid; }
        }
    </style>
</head>
<body>

<div class="container">
    <h1>ğŸ”¢ æ•°å­—å®å®æ‰¾æ’å ğŸ”¢</h1>
    
    <div style="text-align: center; font-size: 1.1em; color: #666;">
        ğŸ‘‹ å—¨ï¼Œå°å°ç®—æ³•å®¶ï¼<br>
        ä»Šå¤©æˆ‘ä»¬è¦ç©ä¸€ä¸ªâ€œæ’æ’åï¼Œåˆ†æœæœï¼Œå†å›åº§ä½â€çš„æ¸¸æˆã€‚<br>
        è¿™å°±å«ï¼š<b>ç¦»æ•£åŒ– (Discretization)</b> çš„ç¬¬ä¸€æ­¥ï¼
    </div>

    <div class="card problem">
        <h2>ğŸ“œ ä»»åŠ¡æ¸…å• (é¢˜ç›®æè¿°)</h2>
        <p><strong>ä»»åŠ¡ç›®æ ‡ï¼š</strong> è€å¸ˆç»™äº†ä¸€ç»„æ•°å­—ï¼Œæˆ‘ä»¬è¦å‘Šè¯‰æ¯ä¸€ä¸ªæ•°å­—ï¼šå®ƒåœ¨æ‰€æœ‰æ•°å­—é‡Œæ’ç¬¬å‡ åï¼ˆä»å°åˆ°å¤§ï¼‰ã€‚</p>
        <p><strong>ç‰¹åˆ«è¦æ±‚ï¼š</strong> è¾“å‡ºçš„æ—¶å€™ï¼Œå¿…é¡»æŒ‰æ•°å­—<strong>ä¸€å¼€å§‹è¿›æ¥çš„é¡ºåº</strong>è¾“å‡ºï¼Œä¸èƒ½æ‰“ä¹±é¡ºåºå“¦ï¼</p>
        
        <div style="display: flex; gap: 20px; flex-wrap: wrap; margin-top: 15px;">
            <div style="flex: 1; background: white; padding: 15px; border-radius: 10px; border: 2px solid #ffcc80;">
                <strong>ğŸ“¥ æ¯”å¦‚è¾“å…¥ï¼š</strong><br>
                5 (å…±5ä¸ªæ•°)<br>
                <span style="font-size: 1.2em; letter-spacing: 5px;">8 2 6 9 4</span>
            </div>
            <div style="flex: 1; background: white; padding: 15px; border-radius: 10px; border: 2px solid #4caf50;">
                <strong>ğŸ“¤ ä½ è¦è¾“å‡ºï¼š</strong><br>
                <span style="font-size: 1.2em; letter-spacing: 5px;">4 1 3 5 2</span><br>
                <span style="font-size: 0.8em; color: #888;">(8æ’ç¬¬4, 2æ’ç¬¬1, 6æ’ç¬¬3...)</span>
            </div>
        </div>
    </div>

    <div class="card logic">
        <h2>ğŸ§  èªæ˜çš„å°è„‘ç“œ (è§£é¢˜æ€è·¯)</h2>
        
        <p>è¿™é“é¢˜æœ€éš¾çš„åœ°æ–¹æ˜¯ï¼š<strong>æ’å®Œåæ¬¡åï¼Œæ•°å­—çš„ä½ç½®ä¹±äº†ï¼Œæ€ä¹ˆæŠŠåæ¬¡â€œè´´â€å›åŸæ¥çš„ä½ç½®ï¼Ÿ</strong></p>
        <p>æˆ‘ä»¬ç”¨ struct ç»“æ„ä½“åˆ¶ä½œä¸€ç§<strong>â€œç‰¹æ®Šçš„å·ç ç‰Œâ€</strong>ï¼š</p>

        <h3>ç¬¬ 1 æ­¥ï¼šå¸¦ç€â€œåº§ä½å·â€å…¥åœº</h3>
        <p>æ¯ä¸ªæ•°å­—è¿›æ¥æ—¶ï¼Œæˆ‘ä»¬ä¸ä»…è¦è®°ä¸‹å®ƒçš„<strong>æ•°å€¼(data)</strong>ï¼Œè¿˜è¦è®°ä¸‹å®ƒåŸæœ¬ååœ¨ç¬¬å‡ ä¸ªä½ç½®ï¼Œå«<strong>ä¸‹æ ‡(index)</strong>ã€‚</p>
        <div class="step-visual">
            <div class="num-box"><span class="val">8</span><span class="idx">åº§ä½:1</span></div>
            <div class="num-box"><span class="val">2</span><span class="idx">åº§ä½:2</span></div>
            <div class="num-box"><span class="val">6</span><span class="idx">åº§ä½:3</span></div>
            <div class="num-box"><span class="val">9</span><span class="idx">åº§ä½:4</span></div>
            <div class="num-box"><span class="val">4</span><span class="idx">åº§ä½:5</span></div>
        </div>

        <div class="arrow-down">â¬‡ï¸ ç¬¬ä¸€æ¬¡æ’åº (æŒ‰æ•°å€¼ä»å°åˆ°å¤§) â¬‡ï¸</div>

        <h3>ç¬¬ 2 æ­¥ï¼šæ’é˜Ÿé¢†â€œæ’åè´´çº¸â€</h3>
        <p>ç°åœ¨æŒ‰ç…§<strong>æ•°å€¼(data)</strong>ä»å°åˆ°å¤§æ’é˜Ÿã€‚æ’å¥½åï¼Œç»™å®ƒä»¬å‘<strong>æ’å(rank)</strong>ã€‚</p>
        <div class="step-visual">
            <div class="num-box"><span class="rank-tag">1</span><span class="val">2</span><span class="idx">åº§ä½:2</span></div>
            <div class="num-box"><span class="rank-tag">2</span><span class="val">4</span><span class="idx">åº§ä½:5</span></div>
            <div class="num-box"><span class="rank-tag">3</span><span class="val">6</span><span class="idx">åº§ä½:3</span></div>
            <div class="num-box"><span class="rank-tag">4</span><span class="val">8</span><span class="idx">åº§ä½:1</span></div>
            <div class="num-box"><span class="rank-tag">5</span><span class="val">9</span><span class="idx">åº§ä½:4</span></div>
        </div>
        <p>ğŸ‘€ <strong>çœ‹ï¼</strong> è™½ç„¶çŸ¥é“è°ç¬¬å‡ åäº†ï¼Œä½†æ˜¯é˜Ÿä¼ä¹±äº†ï¼ˆåº§ä½å· 2,5,3,1,4ï¼‰ã€‚</p>

        <div class="arrow-down">â¬‡ï¸ ç¬¬äºŒæ¬¡æ’åº (æŒ‰åº§ä½å·ä»å°åˆ°å¤§) â¬‡ï¸</div>

        <h3>ç¬¬ 3 æ­¥ï¼šå¸¦ç€è´´çº¸å›åŸä½</h3>
        <p>ç°åœ¨æŒ‰ç…§<strong>åº§ä½å·(index)</strong>ä»å°åˆ°å¤§å†æ’ä¸€æ¬¡ã€‚å¤§å®¶å›åˆ°åŸæ¥çš„ä½ç½®ï¼Œä½†æ˜¯èº«ä¸Šå·²ç»è´´å¥½äº†<strong>æ’å(rank)</strong>ï¼</p>
        <div class="step-visual">
            <div class="num-box"><span class="rank-tag">4</span><span class="val">8</span><span class="idx">åº§ä½:1</span></div>
            <div class="num-box"><span class="rank-tag">1</span><span class="val">2</span><span class="idx">åº§ä½:2</span></div>
            <div class="num-box"><span class="rank-tag">3</span><span class="val">6</span><span class="idx">åº§ä½:3</span></div>
            <div class="num-box"><span class="rank-tag">5</span><span class="val">9</span><span class="idx">åº§ä½:4</span></div>
            <div class="num-box"><span class="rank-tag">2</span><span class="val">4</span><span class="idx">åº§ä½:5</span></div>
        </div>
        <p>ğŸ‰ <strong>æˆåŠŸï¼</strong> ç°åœ¨æŒ‰é¡ºåºè¯»å‡ºå®ƒä»¬èº«ä¸Šçš„çº¢è‰²å°è´´çº¸ï¼ˆæ’åï¼‰å°±å¥½å•¦ï¼</p>
    </div>

    <div class="card code-box">
        <h2>ğŸ’» é­”æ³•å’’è¯­ (ä»£ç è¯¦è§£)</h2>
        <p>è¿™å°±æ˜¯å®ç°ä¸Šé¢ä¸‰ä¸ªæ­¥éª¤çš„å®Œæ•´ä»£ç ï¼š</p>

<pre>
<span class="keyword">#include</span> &lt;bits/stdc++.h&gt;
<span class="keyword">using namespace std;</span>

<span class="comment">// ğŸ“¦ å®šä¹‰ä¸€ä¸ªåŒ…å«3ä¸ªä¿¡æ¯çš„ç»“æ„ä½“</span>
<span class="keyword">struct</span> <span class="type">node</span>
{
    <span class="type">int</span> data;   <span class="comment">// ğŸ”¢ æ•°å€¼ï¼šæ•°å­—æœ¬èº«çš„å¤§å°</span>
    <span class="type">int</span> rank;   <span class="comment">// ğŸ† æ’åï¼šå®ƒæ’ç¬¬å‡ å</span>
    <span class="type">int</span> index;  <span class="comment">// ğŸ“ ä¸‹æ ‡ï¼šå®ƒåŸæ¥ååœ¨å“ªä¸ªä½ç½®</span>
}; 
<span class="type">node</span> a[10001];  <span class="comment">// å‡†å¤‡å¥½10001ä¸ªè¿™æ ·çš„ç»“æ„ä½“</span>
<span class="type">int</span> n;

<span class="comment">// âš–ï¸ æ¯”è¾ƒè§„åˆ™1ï¼šæŒ‰â€œæ•°å€¼â€æ¯”å¤§å°</span>
<span class="type">bool</span> comp1(<span class="type">node</span> x, <span class="type">node</span> y)
{
    <span class="keyword">return</span> x.data < y.data; <span class="comment">// æ•°å€¼å°çš„æ’å‰é¢</span>
}

<span class="comment">// âš–ï¸ æ¯”è¾ƒè§„åˆ™2ï¼šæŒ‰â€œåŸæ¥çš„åº§ä½â€æ¯”å¤§å°</span>
<span class="type">bool</span> comp2(<span class="type">node</span> x, <span class="type">node</span> y)
{
    <span class="keyword">return</span> x.index < y.index; <span class="comment">// åº§ä½å·å°çš„æ’å‰é¢ï¼ˆæ¢å¤åŸæ ·ï¼‰</span>
}

<span class="keyword">int</span> main()
{
    cin >> n;
    <span class="keyword">for</span>(<span class="type">int</span> i=1; i<=n; i++)
    {
        cin >> a[i].data;  <span class="comment">// è¯»å…¥æ•°å­—</span>
        a[i].index = i;    <span class="comment">// ğŸ“ å…³é”®ï¼ç«‹åˆ»è®°ä¸‹å®ƒçš„åº§ä½å·(i)</span>
    }

    <span class="comment">// ğŸ”¥ ç¬¬ä¸€æ¬¡æ’åºï¼šä¸ºäº†çŸ¥é“åæ¬¡</span>
    sort(a+1, a+1+n, comp1); 

    <span class="comment">// ğŸ·ï¸ å‘æ’åè´´çº¸</span>
    <span class="keyword">for</span>(<span class="type">int</span> i=1; i<=n; i++)
    {
        a[i].rank = i;     <span class="comment">// æ’åœ¨ç¬¬å‡ ä¸ªï¼Œæ’åå°±æ˜¯å‡ </span>
    }

    <span class="comment">// ğŸ”¥ ç¬¬äºŒæ¬¡æ’åºï¼šä¸ºäº†å›åŸæ¥çš„åº§ä½</span>
    sort(a+1, a+1+n, comp2); 

    <span class="comment">// ğŸ“¤ è¾“å‡ºç»“æœ</span>
    <span class="keyword">for</span>(<span class="type">int</span> i=1; i<=n; i++)
    {
        cout << a[i].rank << " "; <span class="comment">// åªè¾“å‡ºæ’å</span>
    }

    <span class="keyword">return</span> 0;
}
</pre>
    </div>

    <div class="card logic" style="border-color: #9c27b0; background-color: #f3e5f5;">
        <h2>ğŸŒŸ é‡ç‚¹å°ç»“</h2>
        <ul>
            <li>âœï¸ <strong>ä¸ºä»€ä¹ˆè¦å­˜ indexï¼Ÿ</strong> å› ä¸º sort ä¼šæ‰“ä¹±é¡ºåºï¼Œå¦‚æœä¸è®°ä¸‹åŸæ¥çš„ä½ç½®ï¼Œæ•°å­—å®å®å°±æ‰¾ä¸åˆ°å®¶å•¦ï¼</li>
            <li>ğŸ”„ <strong>ä¸¤æ¬¡ sort çš„ä½œç”¨ï¼š</strong>
                <ul>
                    <li>ç¬¬1æ¬¡ç”¨ <code>comp1</code>ï¼šæ˜¯ä¸ºäº†ç®—å‡ºè°å¤§è°å°ï¼ˆå®šæ’åï¼‰ã€‚</li>
                    <li>ç¬¬2æ¬¡ç”¨ <code>comp2</code>ï¼šæ˜¯ä¸ºäº†æŠŠå¤§å®¶å˜å›åŸæ¥çš„è¾“å…¥é¡ºåºã€‚</li>
                </ul>
            </li>
            <li>ğŸš© <strong>Struct çš„å¥½å¤„ï¼š</strong> å®ƒæŠŠ <code>data</code> (æ•°å€¼) å’Œ <code>index</code> (åº§ä½å·) ç»‘åœ¨äº†ä¸€èµ·ï¼Œç§»åŠ¨çš„æ—¶å€™æ˜¯ä¸€èµ·ç§»åŠ¨çš„ï¼Œä¸ä¼šå¼„ä¸¢ï¼</li>
        </ul>
    </div>

    <div style="text-align: center; margin-top: 40px; color: #aaa; font-size: 0.9em;">
        ğŸˆ æ­å–œä½ ï¼Œåˆå­¦ä¼šäº†ä¸€ä¸ªé«˜çº§æŠ€å·§ï¼ç»§ç»­åŠ æ²¹ï¼ ğŸˆ
    </div>
</div>

</body>
</html>